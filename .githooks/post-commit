#!/bin/sh

# Post-commit hook to create version tags automatically
# This runs after successful commits to tag new versions

echo "🔄 Running post-commit version tagging..."

# Get the current version from package.json
VERSION=$(node -p "require('./package.json').version")

# Check if this version tag already exists
if git tag -l | grep -q "^v$VERSION$"; then
    echo "ℹ️  Version tag v$VERSION already exists"
else
    # Create new version tag
    git tag "v$VERSION" -m "Version $VERSION - Auto-generated tag"
    echo "🏷️  Created version tag: v$VERSION"
fi

echo "✅ Post-commit hook completed"