#!/bin/sh

# Pre-commit hook to automatically generate changelog
# This runs before each commit to update the changelog with new changes

echo "ğŸ”„ Running pre-commit changelog generation..."

# Run the changelog generator
node scripts/generate-changelog.js

# Check if changelog was updated
if git diff --cached --name-only | grep -q "src/data/changelog.js\|package.json"; then
    echo "âœ… Changelog updated automatically"
    
    # Add updated files to the commit
    git add src/data/changelog.js package.json
    
    echo "ğŸ“ Added changelog.js and package.json to commit"
else
    echo "â„¹ï¸  No changelog updates needed"
fi

echo "âœ… Pre-commit hook completed"