---
// Stella Sora Character Image Component
// Import all character images once and use mapping like other games
import { Image } from 'astro:assets';

// Import all Stella Sora character images once
import amberImage from '../../assets/images/games/stella-sora/gameimg/characters/Amber.jpg';
import chitoseImage from '../../assets/images/games/stella-sora/gameimg/characters/Chitose.jpg';
import chixiaImage from '../../assets/images/games/stella-sora/gameimg/characters/Chixia.jpg';
import floraImage from '../../assets/images/games/stella-sora/gameimg/characters/Flora.jpg';
import freesiaImage from '../../assets/images/games/stella-sora/gameimg/characters/Freesia.jpg';
import fuyukaImage from '../../assets/images/games/stella-sora/gameimg/characters/Fuyuka.jpg';
import gerieImage from '../../assets/images/games/stella-sora/gameimg/characters/Gerie.jpg';
import jinglinImage from '../../assets/images/games/stella-sora/gameimg/characters/Jinglin.jpg';
import kasimiraImage from '../../assets/images/games/stella-sora/gameimg/characters/Kasimira.jpg';
import minovaImage from '../../assets/images/games/stella-sora/gameimg/characters/Minova.jpg';
import mistiqueImage from '../../assets/images/games/stella-sora/gameimg/characters/Mistique.jpg';
import nanohaImage from '../../assets/images/games/stella-sora/gameimg/characters/Nanoha.jpg';
import nazukaImage from '../../assets/images/games/stella-sora/gameimg/characters/Nazuka.jpg';
import nazunaImage from '../../assets/images/games/stella-sora/gameimg/characters/Nazuna.jpg';
import shiaImage from '../../assets/images/games/stella-sora/gameimg/characters/Shia.jpg';
import tiliaImage from '../../assets/images/games/stella-sora/gameimg/characters/Tilia.jpg';

// Centralized character image mapping
const characterImageMap = {
  'Amber.jpg': amberImage,
  'Chitose.jpg': chitoseImage,
  'Chixia.jpg': chixiaImage,
  'Flora.jpg': floraImage,
  'Freesia.jpg': freesiaImage,
  'Fuyuka.jpg': fuyukaImage,
  'Gerie.jpg': gerieImage,
  'Jinglin.jpg': jinglinImage,
  'Kasimira.jpg': kasimiraImage,
  'Minova.jpg': minovaImage,
  'Mistique.jpg': mistiqueImage,
  'Nanoha.jpg': nanohaImage,
  'Nazuka.jpg': nazukaImage,
  'Nazuna.jpg': nazunaImage,
  'Shia.jpg': shiaImage,
  'Tilia.jpg': tiliaImage,
};

const {
  imageName, // This is now a string name, not an image object
  alt,
  class: className = '',
  loading = 'lazy',
  format = 'webp',
  quality = 95,
  width = 500,
  height = 500,
} = Astro.props;

// Get the imported image object from the map
let imageKey = imageName;

// Add extension if missing
if (!imageKey.includes('.')) {
  imageKey = `${imageKey}.jpg`;
}

const imageSrc = characterImageMap[imageKey] || characterImageMap['Chitose.jpg'];
---

<Image
  src={imageSrc}
  alt={alt}
  width={width}
  height={height}
  class={`${className} character-img-fill`}
  loading={loading}
  format={format}
  quality={quality}
  sizes="(max-width: 768px) 200px, 300px"
/>
