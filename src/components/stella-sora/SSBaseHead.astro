---
import { SITE_TITLE } from '../../consts';

export interface Props {
  title?: string;
  description?: string;
  image?: string;
}

const {
  title = SITE_TITLE,
  description = 'Stella Sora Wiki - Fantasy RPG Trekker Guide, Nova Continent & Strategy',
  image = '/images/games/stella-sora/gameimg/BG1.jpg',
} = Astro.props;

// Set meta tags
const metaTitle = title === SITE_TITLE ? SITE_TITLE : `${title} | Stella Sora Wiki`;
const metaDescription = description;
const metaImage = image;
const canonicalURL = new URL(Astro.url.pathname, Astro.site).href;
---

<!-- Meta Tags -->
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content={metaDescription} />
<meta
  name="keywords"
  content="Stella Sora, ステラソラ, fantasy RPG, Yostar, Nova Continent, Trekker collection, gacha game, Stella Sora wiki, Stella Sora characters, Stella Sora download, Cococha system, Star Towers, Demon King, Blank Brigade, top-down combat"
/>

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content={canonicalURL} />
<meta property="og:title" content={metaTitle} />
<meta property="og:description" content={metaDescription} />
<meta property="og:image" content={metaImage} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:site_name" content="Stella Sora Wiki" />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={canonicalURL} />
<meta property="twitter:title" content={metaTitle} />
<meta property="twitter:description" content={metaDescription} />
<meta property="twitter:image" content={metaImage} />

<!-- Additional SEO Meta -->
<meta name="robots" content="index, follow" />
<meta name="language" content="English" />
<meta name="author" content="GachaWiki" />
<meta name="theme-color" content="#7dd3fc" />

<!-- Canonical URL -->
<link rel="canonical" href={canonicalURL} />

<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

<!-- Preconnect for external resources -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

<!-- Stella Sora Specific Meta -->
<meta name="game:title" content="Stella Sora ステラソラ" />
<meta name="game:genre" content="Fantasy RPG, Gacha, Action Adventure, Top-Down Combat" />
<meta name="game:platform" content="Android, iOS" />
<meta name="game:rating" content="Teen" />
<meta name="game:developer" content="Yostar Limited" />
<meta name="game:publisher" content="Yostar Limited" />

<!-- Structured Data for Game -->
<script
  type="application/ld+json"
  set:html={JSON.stringify({
    '@context': 'https://schema.org',
    '@type': 'VideoGame',
    name: 'Stella Sora ステラソラ',
    alternateName: 'Stella Sora',
    description:
      'Fantasy RPG developed by Yostar, set in the mysterious Nova Continent. As the amnesiac Demon King, explore Star Towers, collect Trekkers, and uncover lost memories through the innovative Cococha system.',
    genre: ['Fantasy RPG', 'Gacha', 'Action Adventure', 'Top-Down Combat'],
    applicationCategory: 'Game',
    operatingSystem: 'Android, iOS',
    gamePlatform: ['Android', 'iOS'],
    contentRating: 'Teen',
    playMode: 'SinglePlayer',
    publisher: {
      '@type': 'Organization',
      name: 'Yostar Limited',
      url: 'https://yo-star.com',
    },
    offers: {
      '@type': 'Offer',
      price: '0',
      priceCurrency: 'USD',
      availability: 'https://schema.org/InStock',
      seller: {
        '@type': 'Organization',
        name: 'Yostar Limited',
      },
    },
    image: metaImage,
    url: canonicalURL,
    sameAs: [
      'https://x.com/StellaSoraEN',
      'https://x.com/StellaSoraJP',
      'https://stellasora.global/',
      'https://www.youtube.com/@StellaSoraJP',
    ],
  })}
/>

<!-- Website Structured Data -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Stella Sora Wiki",
    "alternateName": "Stella Sora ステラソラ Wiki",
    "description": "Complete guide for Stella Sora fantasy RPG. Trekker database, Nova Continent exploration, Cococha system, and strategy walkthrough.",
    "url": "https://gachawiki.info/guides/stella-sora/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://gachawiki.info/guides/stella-sora/characters/?search={search_term_string}",
      "query-input": "required name=search_term_string"
    },
    "publisher": {
      "@type": "Organization",
      "name": "GachaWiki",
      "url": "https://gachawiki.info"
    }
  }
</script>

<!-- Stella Sora Theme CSS Variables (Inline for faster loading) -->
<style>
  :root {
    --ss-theme-color: #7dd3fc;
    --ss-theme-color-dark: #0ea5e9;
    --ss-theme-color-light: #bae6fd;
  }
</style>

<!-- Performance Optimization -->
<link rel="dns-prefetch" href="//stellasora.global" />
<link rel="dns-prefetch" href="//x.com" />
<link rel="dns-prefetch" href="//youtube.com" />

<!-- Preload Critical Resources -->
<!-- Image preloads removed since using Astro optimization -->
<!-- CSS preloads removed as they're imported directly -->
