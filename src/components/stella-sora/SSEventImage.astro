---
// Stella Sora Event Image Component
// Import all event images once and use mapping
import { Image } from 'astro:assets';

// Import all Stella Sora event images once
import event1Image from '../../assets/images/games/stella-sora/events/1/1.jpg';
import event2Image from '../../assets/images/games/stella-sora/events/1/2.jpg';
import event3Image from '../../assets/images/games/stella-sora/events/1/3.jpg';
import event4Image from '../../assets/images/games/stella-sora/events/1/4.jpg';

// Import folder 2 event images
import event2_1Image from '../../assets/images/games/stella-sora/events/2/1.jpg';
import event2_2Image from '../../assets/images/games/stella-sora/events/2/2.jpg';
import event2_3Image from '../../assets/images/games/stella-sora/events/2/3.jpg';
import event2_4Image from '../../assets/images/games/stella-sora/events/2/4.jpg';

// Import folder 3 event images (A Finale Echoing)
import event3_1Image from '../../assets/images/games/stella-sora/events/3/Opera_Ghost.jpg';

// Import folder 4 event images (Version 1.2 and new â˜…5 Trekker: Fuyuka)
import event4_1Image from '../../assets/images/games/stella-sora/events/4/1.jpg';
import event4_2Image from '../../assets/images/games/stella-sora/events/4/2.jpg';
import event4_3Image from '../../assets/images/games/stella-sora/events/4/3.jpg';
import event4_4Image from '../../assets/images/games/stella-sora/events/4/4.jpg';

// Import folder 5 event images (Guild Sweet Guild)
import event5_1Image from '../../assets/images/games/stella-sora/events/5/1.jpg';
import event5_2Image from '../../assets/images/games/stella-sora/events/5/2.jpg';
import event5_3Image from '../../assets/images/games/stella-sora/events/5/3.jpg';
import event5_4Image from '../../assets/images/games/stella-sora/events/5/4.jpg';

// Import folder 6 event images (Version 1.3 - A Breezy Romance)
import event6_1Image from '../../assets/images/games/stella-sora/events/6/1.png';
import event6_2Image from '../../assets/images/games/stella-sora/events/6/2.png';
import event6_3Image from '../../assets/images/games/stella-sora/events/6/3.png';
import event6_4Image from '../../assets/images/games/stella-sora/events/6/4.jpeg';
import event6_5Image from '../../assets/images/games/stella-sora/events/6/5.jpeg';
import event6_6Image from '../../assets/images/games/stella-sora/events/6/6.jpeg';

// Import folder 7 event images (Beyond the Dream Limited Event)
import event7_1Image from '../../assets/images/games/stella-sora/events/7/1.jpg';
import event7_2Image from '../../assets/images/games/stella-sora/events/7/2.jpg';
import event7_3Image from '../../assets/images/games/stella-sora/events/7/3.jpg';
import event7_4Image from '../../assets/images/games/stella-sora/events/7/4.jpg';

// Centralized event image mapping
const eventImageMap = {
  '1/1': event1Image,
  '1/2': event2Image,
  '1/3': event3Image,
  '1/4': event4Image,
  '2/1': event2_1Image,
  '2/2': event2_2Image,
  '2/3': event2_3Image,
  '2/4': event2_4Image,
  '3/1': event3_1Image,
  '4/1': event4_1Image,
  '4/2': event4_2Image,
  '4/3': event4_3Image,
  '4/4': event4_4Image,
  '5/1': event5_1Image,
  '5/2': event5_2Image,
  '5/3': event5_3Image,
  '5/4': event5_4Image,
  '6/1': event6_1Image,
  '6/2': event6_2Image,
  '6/3': event6_3Image,
  '6/4': event6_4Image,
  '6/5': event6_5Image,
  '6/6': event6_6Image,
  '7/1': event7_1Image,
  '7/2': event7_2Image,
  '7/3': event7_3Image,
  '7/4': event7_4Image,
};

const {
  imageName,
  alt = 'Event image',
  class: className = '',
  loading = 'lazy',
  format = 'webp',
  quality = 85,
  width = 1200,
  height = 2000,
  sizes = '(max-width: 480px) 100vw, (max-width: 768px) 90vw, 1200px',
} = Astro.props;

// Get the imported image object from the map
const imageSrc = eventImageMap[imageName] || event1Image;
---

<div class={`ss-event-image ${className}`}>
  <picture>
    <source srcset={imageSrc.src} type="image/webp" sizes={sizes} />
    <Image
      src={imageSrc}
      alt={alt}
      width={width}
      height={height}
      loading={loading}
      format={format}
      quality={quality}
      sizes={sizes}
      style="object-fit: contain; border-radius: 8px; max-width: 100%; height: auto;"
    />
  </picture>
</div>

<style>
  .ss-event-image {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto 2rem auto;
    background: var(--ss-bg-secondary);
    border-radius: 12px;
    padding: 1rem;
    border: 1px solid var(--ss-border-color);
    overflow-x: auto;
    will-change: transform; /* Optimize for mobile animations */
  }

  .ss-event-image img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 8px;
    transition: transform 0.3s ease;
  }

  /* Mobile-specific image optimizations */
  @media (max-width: 768px) {
    .ss-event-image {
      padding: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .ss-event-image img {
      border-radius: 6px;
    }
  }

  @media (max-width: 480px) {
    .ss-event-image {
      padding: 0.5rem;
      margin-bottom: 1rem;
      margin-left: 0;
      margin-right: 0;
      max-width: 100%;
    }

    .ss-event-image img {
      border-radius: 4px;
    }
  }

  /* Prevent horizontal scroll on small screens */
  @media (max-width: 360px) {
    .ss-event-image {
      padding: 0.25rem;
      border-radius: 8px;
    }

    .ss-event-image img {
      border-radius: 4px;
    }
  }
</style>
