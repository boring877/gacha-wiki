---
import { HORIZON_WALKER_CHARACTERS, getTagCategory } from '../../data/horizon-walker/characters.js';

export interface Props {
  characters?: typeof HORIZON_WALKER_CHARACTERS;
}

const { characters = HORIZON_WALKER_CHARACTERS } = Astro.props;

---

<!-- Mobile card view container with touch optimization -->
<div class="mobile-card-view" id="mobile-cards-container">
  {
    characters.map(char => (
      <div
        class="mobile-character-card"
        data-character-id={char.id}
        data-slug={char.slug}
        data-url={char.detailUrl}
        data-name={char.name}
        data-rarity={char.rarity}
        data-class={char.class}
        data-element={char.element}
        data-faction={char.faction}
        data-tags={char.tags ? char.tags.join(', ') : ''}
        style="cursor:pointer; touch-action: manipulation;"
      >
        {/* Clean header section - image, name, rarity all together */}
        <div class="mobile-card-header">
          <div class="mobile-card-image">
            <div style="width: 64px; height: 64px; border-radius: 10px; border: 2px solid var(--hw-accent-primary); overflow: hidden;">
              <img src={char.image} alt={char.name} class="character-img" width="64" height="64" loading="lazy" />
            </div>
          </div>
          <div class="mobile-card-info">
            <h3 class="character-name">{char.name}</h3>
            <span class="hw-badge" data-rarity={char.rarity}>{char.rarity}</span>
          </div>
        </div>

        {/* Clean stats grid - cost + 5 basic stats */}
        <div class="mobile-card-stats-grid">
          <div class="stat-item cost-stat">
            <span class="stat-label">Cost</span>
            <span class="stat-value" data-stat="cost">{char.cost}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">STR</span>
            <span class="stat-value" data-stat="strength">{char.stats.strength}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">INT</span>
            <span class="stat-value" data-stat="intelligence">{char.stats.intelligence}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">VIT</span>
            <span class="stat-value" data-stat="vitality">{char.stats.vitality}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">AGI</span>
            <span class="stat-value" data-stat="agility">{char.stats.agility}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">TEC</span>
            <span class="stat-value" data-stat="technic">{char.stats.technic}</span>
          </div>
        </div>

        {/* Gameplay Tags with categorization */}
        {char.tags && char.tags.length > 0 && (
          <div class="mobile-card-tags">
            <div class="tags-label">Gameplay Tags:</div>
            <div class="tags-container">
              {char.tags.map(tag => (
                <span class={`character-tag ${getTagCategory(tag)}`}>{tag}</span>
              ))}
            </div>
          </div>
        )}
      </div>
    ))
  }
</div>

