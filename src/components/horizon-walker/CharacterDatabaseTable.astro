---
import { Image } from 'astro:assets';
import { HORIZON_WALKER_CHARACTERS } from '../../data/horizon-walker/characters.js';

export interface Props {
  characters?: typeof HORIZON_WALKER_CHARACTERS;
}

const { characters = HORIZON_WALKER_CHARACTERS } = Astro.props;
---

<!-- Desktop table container with touch optimizations -->
<div class="character-table-container">
  <table class="character-table" id="character-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Image</th>
        <th>Name</th>
        <th>Rarity</th>
        <th>Cost</th>
        <th>STR</th>
        <th>INT</th>
        <th>VIT</th>
        <th>AGI</th>
        <th>TEC</th>
      </tr>
    </thead>
    <tbody id="character-table-body">
      {characters.map((character, idx) => (
        <tr
          data-character-id={character.id}
          data-url={character.detailUrl}
          data-name={character.name}
          data-rarity={character.rarity}
          data-class={character.class}
          data-element={character.element}
          data-faction={character.faction}
          data-tags={character.tags ? character.tags.join(', ') : ''}
          style="cursor:pointer; touch-action: manipulation;"
        >
          <td>{idx + 1}</td>
          <td>
            <div style="width: 80px; height: 80px; border-radius: 8px; border: 1px solid var(--hw-accent-primary); overflow: hidden;">
              <Image
                src={character.image}
                alt={character.name}
                class="character-img"
                width={80}
                height={80}
                loading="lazy"
              />
            </div>
          </td>
          <td>
            <span class="character-name">{character.name}</span>
          </td>
          <td>
            <span class="hw-badge" data-rarity={character.rarity} data-sort-key="rarity">
              {character.rarity}
            </span>
          </td>
          <td data-sort-key="cost">
            <span class="cost-value">{character.cost}</span>
          </td>
          <td data-sort-key="strength">
            <span class="stat-value">{character.stats.strength}</span>
          </td>
          <td data-sort-key="intelligence">
            <span class="stat-value">{character.stats.intelligence}</span>
          </td>
          <td data-sort-key="vitality">
            <span class="stat-value">{character.stats.vitality}</span>
          </td>
          <td data-sort-key="agility">
            <span class="stat-value">{character.stats.agility}</span>
          </td>
          <td data-sort-key="technic">
            <span class="stat-value">{character.stats.technic}</span>
          </td>
        </tr>
      ))}
    </tbody>
  </table>
</div>

