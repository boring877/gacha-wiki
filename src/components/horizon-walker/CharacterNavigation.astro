---
import MobileCharacterNavigation from './MobileCharacterNavigation.astro';
import { HORIZON_WALKER_CHARACTERS } from '../../data/horizon-walker/characters.js';

export interface Props {
  currentCharacterSlug: string;
}

const { currentCharacterSlug } = Astro.props;

// Use actual character data
const currentIndex = HORIZON_WALKER_CHARACTERS.findIndex(
  char => char.slug === currentCharacterSlug
);

const prevIndex = currentIndex > 0 ? currentIndex - 1 : HORIZON_WALKER_CHARACTERS.length - 1;
const nextIndex = currentIndex < HORIZON_WALKER_CHARACTERS.length - 1 ? currentIndex + 1 : 0;

const prevCharacter = HORIZON_WALKER_CHARACTERS[prevIndex];
const nextCharacter = HORIZON_WALKER_CHARACTERS[nextIndex];

const hasNavigation = currentIndex !== -1 && prevCharacter && nextCharacter;
---

{
  hasNavigation && (
    <>
      {/* Desktop Character Navigation */}
      <nav class="hw-character-navigation desktop-only" aria-label="Character navigation">
        <div class="nav-container">
          <a
            href={`/guides/horizon-walker/characters/${prevCharacter.slug}`}
            class="nav-button prev-button"
            aria-label={`Previous character: ${prevCharacter.name}`}
          >
            <span class="nav-arrow">←</span>
            <span class="nav-text">
              <span class="nav-label">Previous</span>
              <span class="nav-character">{prevCharacter.name}</span>
            </span>
          </a>

          <a
            href="/guides/horizon-walker/characters/"
            class="nav-button center-button"
            aria-label="Back to character database"
          >
            <span class="nav-text">All Characters</span>
          </a>

          <a
            href={`/guides/horizon-walker/characters/${nextCharacter.slug}`}
            class="nav-button next-button"
            aria-label={`Next character: ${nextCharacter.name}`}
          >
            <span class="nav-text">
              <span class="nav-label">Next</span>
              <span class="nav-character">{nextCharacter.name}</span>
            </span>
            <span class="nav-arrow">→</span>
          </a>
        </div>
      </nav>

      {/* Mobile Character Navigation Component */}
      <MobileCharacterNavigation
        currentCharacterSlug={currentCharacterSlug}
        prevCharacter={prevCharacter}
        nextCharacter={nextCharacter}
      />
    </>
  )
}

<style>
  @import '../../styles/components/horizon-walker-character-navigation.css';
</style>
