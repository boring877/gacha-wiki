---
// Displays boss icons from the Limited_Boss/icon-arrive-arrive-limit directory
import { Image } from 'astro:assets';

interface Props {
  fileName: string;
  alt: string;
  width?: number;
  height?: number;
  loading?: 'eager' | 'lazy';
  class?: string;
}

const { fileName, alt, width, height, loading = 'lazy', class: className = '' } = Astro.props;

// Import all boss icons from the Limited_Boss directory
const bossImages = import.meta.glob<{ default: ImageMetadata }>(
  '/src/assets/images/games/Busty_Burst/Limited_Boss/icon-arrive-arrive-limit/*.png',
  { eager: true }
);

// Find the matching image
const imagePath = `/src/assets/images/games/Busty_Burst/Limited_Boss/icon-arrive-arrive-limit/${fileName}`;
const imageModule = bossImages[imagePath];
const imageSrc = imageModule?.default;

// Use natural dimensions if width/height not specified
const imageWidth = width || imageSrc?.width || 350;
const imageHeight = height || imageSrc?.height || 350;
---

{
  imageSrc ? (
    <Image
      src={imageSrc}
      alt={alt}
      width={imageWidth}
      height={imageHeight}
      loading={loading}
      class={`boss-icon ${className}`.trim()}
    />
  ) : (
    <div
      class={`boss-icon-placeholder ${className}`.trim()}
      style={`width: ${imageWidth}px; height: ${imageHeight}px;`}
      title={alt}
    >
      ?
    </div>
  )
}

<style>
  .boss-icon {
    display: inline-block;
    object-fit: contain;
  }

  .boss-icon-placeholder {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: var(--bb-bg-secondary, #2a2a3d);
    border: 1px solid var(--bb-border, #3d3d5c);
    border-radius: 8px;
    color: var(--bb-text-secondary, #a0a0b0);
    font-size: 1rem;
  }
</style>
