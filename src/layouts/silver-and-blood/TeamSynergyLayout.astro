---
import SABBaseHead from '../../components/silver-and-blood/SABBaseHead.astro';
import GameSEO from '../../components/GameSEO.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import GameNavigationHeader from '../../components/GameNavigationHeader.astro';
import MobileMenu from '../../components/MobileMenu.astro';
import CustomScrollbar from '../../components/CustomScrollbar.astro';
import Analytics from '../../components/Analytics.astro';
import DecorativeLines from '../../components/DecorativeLines.astro';
import Breadcrumb from '../../components/silver-and-blood/Breadcrumb.astro';
import { Image } from 'astro:assets';

// Import CSS files properly
import '../../styles/games/silver-and-blood/sab-colors.css';
import '../../styles/global.css';
import '../../styles/typography.css';
import '../../styles/games/silver-and-blood/sab-layout.css';
import '../../styles/games/silver-and-blood/sab-badge-colours.css';
import '../../styles/games/silver-and-blood/sab-team-synergy.css';

export interface Props {
  title: string;
  description?: string;
  gameTitle?: string;
  heroImage?: string;
}

const { title, description, gameTitle, heroImage } = Astro.props;
---

<html lang="en">
  <head>
    <SABBaseHead
      title={title}
      description={description || ''}
    />
    <GameSEO
      gameKey="silver-and-blood"
      title={title}
      description={description}
      additionalKeywords={[
        'silver and blood team builds',
        'silver and blood team building',
        'silver and blood team composition',
        'silver and blood team builder',
        'sab team builds',
        'silver and blood best teams',
        'silver and blood team guide',
        'silver and blood party composition',
        'team build calculator',
        'silver and blood team formations',
        'silver and blood squad building',
        'silver and blood optimal teams',
        'silver and blood meta teams',
        'silver and blood clan hunt teams',
        'silver and blood boss teams',
        'sab best team composition',
      ]}
    />

    <!-- Structured Data for Team Builds -->
    <script type="application/ld+json" is:inline>
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Silver and Blood Team Builds Guide",
        "description": "Complete team build database for Silver and Blood. Find the best team compositions for Clan Hunt, Boss fights, and general content.",
        "url": "https://gachawiki.info/guides/silver-and-blood/team-synergy/",
        "isPartOf": {
          "@type": "WebSite",
          "name": "GachaWiki",
          "url": "https://gachawiki.info"
        },
        "about": {
          "@type": "VideoGame",
          "name": "Silver and Blood"
        },
        "mainEntity": {
          "@type": "ItemList",
          "name": "Team Builds",
          "description": "Recommended team compositions for Silver and Blood",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "SSS Tier Teams",
              "description": "Top tier team compositions"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "SS Tier Teams",
              "description": "Excellent team compositions"
            }
          ]
        }
      }
    </script>
    <slot name="head" />
    <Analytics />
  </head>
  <body class="sab-body">
    <CustomScrollbar />
    <!-- Background layers for visual depth -->
    <div class="bg-layer sab-bg-primary"></div>
    <div class="bg-layer sab-bg-accent-1"></div>
    <div class="bg-layer sab-bg-accent-2"></div>
    <div class="bg-layer sab-bg-accent-3"></div>

    <div class="sab-content">
      <Header />
      <GameNavigationHeader currentPath={Astro.url.pathname} gameKey="silver-and-blood" />
      <MobileMenu />

      <div class="sab-container">
        <main class="silver-and-blood-main" id="main-content">
          <!-- Silver and Blood Hero Section -->
          {
            heroImage && gameTitle && (
              <section class="hero-section">
                {/* Hero Image Container */}
                <div class="hero-image-wrapper">
                  <div class="hero-image-container">
                    <Image
                      src={heroImage}
                      alt={gameTitle}
                      class="hero-image"
                      loading="eager"
                      decoding="async"
                      width={1200}
                      height={400}
                    />
                    {/* Overlay Gradient */}
                    <div class="hero-overlay" />
                  </div>
                </div>

                {/* Game Title */}
                <h1 class="hero-title">{gameTitle}</h1>
                {/* Decorative Elements */}
                <DecorativeLines />
              </section>
            )
          }
          <!-- Title Only Section (when no hero image) -->
          {
            !heroImage && gameTitle && (
              <section class="title-only-section">
                <h1 class="title-only-heading">{gameTitle}</h1>

                <DecorativeLines />
              </section>
            )
          }

          <!-- Breadcrumb Navigation -->
          <Breadcrumb autoGenerate={true} gameKey="silver-and-blood" showBackButton={true} />

          <!-- Content Area -->
          <div class="content-area">
            <slot />
          </div>
        </main>
      </div>

      <Footer />
    </div>
  </body>
</html>
