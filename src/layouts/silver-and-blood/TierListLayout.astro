---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import GameNavigationHeader from '../../components/GameNavigationHeader.astro';
import MobileMenu from '../../components/MobileMenu.astro';
import DecorativeLines from '../../components/DecorativeLines.astro';
import OptimizedImage from '../../components/OptimizedImage.astro';
import GameSEO from '../../components/GameSEO.astro';
import CustomScrollbar from '../../components/CustomScrollbar.astro';
import Comments from '../../components/Comments.astro';

// Import CSS files properly
import '../../styles/colors.css';
import '../../styles/global.css';
import '../../styles/typography.css';
import '../../styles/components/comments.css';
import '../../styles/games/silver-and-blood/sab-layout.css';
import '../../styles/games/silver-and-blood/sab-badge-colours.css';
import '../../styles/games/silver-and-blood/sab-tier-list.css';

export interface Props {
  title: string;
  description?: string;
  gameTitle?: string;
  heroImage?: string;
  breadcrumbs?: Array<{ name: string; url: string }>;
}

const { title, description, gameTitle, heroImage, breadcrumbs } = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead title={title} description={description || ''} breadcrumbs={breadcrumbs} />
    <GameSEO
      gameKey="silver-and-blood"
      title={title}
      description={description}
      additionalKeywords={[
        'tier list',
        'character rankings',
        'best characters',
        'SSS tier characters',
        'SS tier ranking',
        'S tier list',
        'A tier guide',
        'situational characters',
        'timeless aiona tier',
        'van helsing ranking',
        'acappella tier list',
        'fleeting bella guide',
        'transcendent hati',
        'transcendent ami',
        'meta characters',
        'pvp tier list',
        'pvp arena rankings',
        'pve tier list',
        'pve character guide',
        'clan hunt tier list',
        'clan hunt rankings',
        'boss raid tier list',
        'boss raids guide',
        'new player guide',
        'f2p tier list',
        'f2p friendly characters',
        'vampire tier list',
        'vampire characters',
        'character comparison',
        'ranking guide',
        'tier maker',
        'custom tier list',
        'interactive tier list',
        'drag and drop tier list',
        'character ratings',
        'meta ranking',
        'tier list maker',
        'character evaluation',
        'tier guide',
        'ranking system',
        'character power ranking',
        'best vampire characters',
        'strongest characters',
        'sab tier list',
        'silver blood tier list',
        'vampire gacha tier list',
        'dark fantasy tier list',
        'gothic rpg tier list',
        'mobile rpg tier list',
        'character strength ranking',
        'tier list 2025',
        'updated tier list',
        'current meta',
        'tier list guide',
        'ranking criteria',
        'character tier placement',
        'vampire game rankings',
        'gacha tier list',
        'mobile game tier list',
      ]}
    />

    <!-- Image Preloading for Performance - Only when hero image will be displayed -->
    {
      heroImage && gameTitle && (
        <link
          rel="preload"
          as="image"
          href={heroImage.replace('/images/', '/images/optimized/').replace('.jpg', '-large.webp')}
          type="image/webp"
        />
      )
    }

    <slot name="head" />
  </head>
  <body class="sab-body">
    <CustomScrollbar />
    <!-- Background layers for visual depth -->
    <div class="bg-layer bg-primary"></div>
    <div class="bg-layer bg-accent-1"></div>
    <div class="bg-layer bg-accent-2"></div>
    <div class="bg-layer bg-accent-3"></div>

    <div class="sab-content">
      <Header />
      <GameNavigationHeader currentPath={Astro.url.pathname} gameKey="silver-and-blood" />
      <MobileMenu />

      <div class="sab-container">
        <main class="sab-main">
          <!-- Silver and Blood Hero Section -->
          {
            heroImage && gameTitle && (
              <section class="hero-section">
                {/* Hero Image Container */}
                <div class="hero-image-wrapper">
                  <div class="hero-image-container">
                    <OptimizedImage
                      src={heroImage}
                      alt={gameTitle}
                      class="hero-image"
                      loading="eager"
                      decoding="async"
                    />
                    {/* Overlay Gradient */}
                    <div class="hero-overlay" />
                  </div>
                </div>

                {/* Game Title */}
                <h1 class="hero-title">{gameTitle}</h1>
                {/* Decorative Elements */}
                <DecorativeLines />
              </section>
            )
          }
          <!-- Title Only Section (when no hero image) -->
          {
            !heroImage && gameTitle && (
              <section class="title-only-section">
                <h1 class="title-only-heading">{gameTitle}</h1>

                <DecorativeLines />
              </section>
            )
          }

          <!-- Content Area -->
          <div class="content-area">
            <slot />
          </div>

          <!-- Comments Section -->
          <Comments
            category="Silver & Blood Tier Lists"
            categoryId="DIC_kwDOOx85584CuX63"
            theme="dark"
            reactionsEnabled={true}
          />
        </main>
      </div>

      <Footer />
    </div>
  </body>
</html>
