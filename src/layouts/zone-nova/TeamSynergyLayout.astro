---
import ZNBaseHead from '../../components/zone-nova/ZNBaseHead.astro';
import GameSEO from '../../components/GameSEO.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import GameNavigationHeader from '../../components/GameNavigationHeader.astro';
import MobileMenu from '../../components/MobileMenu.astro';
import CustomScrollbar from '../../components/CustomScrollbar.astro';
import DecorativeLines from '../../components/DecorativeLines.astro';
import Breadcrumb from '../../components/zone-nova/Breadcrumb.astro';
import { Image } from 'astro:assets';

// Import CSS files properly
import '../../styles/games/zone-nova/zn-colors.css';
import '../../styles/global.css';
import '../../styles/typography.css';
import '../../styles/games/zone-nova/zn-layout.css';
import '../../styles/games/zone-nova/zn-badge-colour.css';
import '../../styles/games/zone-nova/zn-team-synergy.css';

export interface Props {
  title: string;
  description?: string;
  gameTitle?: string;
  heroImage?: string;
  breadcrumbs?: Array<{ name: string; url: string }>;
}

const { title, description, gameTitle, heroImage, breadcrumbs } = Astro.props;
---

<html lang="en">
  <head>
    <ZNBaseHead
      title={title}
      description={description || ''}
      breadcrumbs={breadcrumbs}
      shouldPreloadDefaultImage={false}
    />
    <GameSEO
      gameKey="zone-nova"
      title={title}
      description={description}
      additionalKeywords={[
        'team synergy',
        'team compositions',
        'team builder',
        'character synergies',
        'meta teams',
        'guild raid teams',
        'rift teams',
        'team strategy',
        'optimal teams',
        'team database',
        'team guide',
        'formation guide',
        'squad builder',
        'party composition',
        'team tier list',
        'best teams',
        'team combinations',
        'character combinations',
        'synergy guide',
        'team optimization',
        'team building tips',
        'effective teams',
        'competitive teams',
        'pve teams',
        'pvp teams',
        'dps teams',
        'support teams',
        'tank teams',
        'healing teams',
        'team comp',
        'team comps',
        'party comp',
        'party comps',
        'zone nova',
        'zone nova teams',
        'zone nova synergy',
        'zone nova team guide',
        'best team comp',
        'optimal team comp',
        'meta team builds',
        'team formations',
        'squad formations',
      ]}
    />

    <!-- Image Preloading for Performance -->

    <slot name="head" />
  </head>
  <body class="zone-nova-body zn-layout-override">
    <CustomScrollbar />
    <!-- Background layers for visual depth similar to landing page -->
    <div class="bg-layer bg-primary"></div>
    <div class="bg-layer bg-accent-1"></div>
    <div class="bg-layer bg-accent-2"></div>
    <div class="bg-layer bg-accent-3"></div>

    <div class="zone-nova-content">
      <Header />
      <GameNavigationHeader currentPath={Astro.url.pathname} gameKey="zone-nova" />
      <MobileMenu />

      <div class="zone-nova-container">
        <main class="zone-nova-main">
          <!-- Zone Nova Hero Section -->
          {
            heroImage && gameTitle && (
              <section class="hero-section">
                {/* Hero Image Container */}
                <div class="hero-image-wrapper">
                  <div class="hero-image-container">
                    <Image
                      src={heroImage}
                      alt={gameTitle}
                      class="hero-image"
                      loading="eager"
                      decoding="async"
                      width={1200}
                      height={400}
                    />
                    {/* Overlay Gradient */}
                    <div class="hero-overlay" />
                  </div>
                </div>

                {/* Game Title */}
                <h1 class="hero-title">{gameTitle}</h1>
                {/* Decorative Elements */}
                <DecorativeLines />
              </section>
            )
          }
          <!-- Title Only Section (when no hero image) -->
          {
            !heroImage && gameTitle && (
              <section class="title-only-section">
                <h1 class="title-only-heading">{gameTitle}</h1>

                <DecorativeLines />
              </section>
            )
          }

          <!-- Breadcrumb Navigation -->
          <Breadcrumb autoGenerate={true} gameKey="zone-nova" showBackButton={true} />

          <!-- Content Area -->
          <div class="content-area">
            <slot />
          </div>
        </main>
      </div>

      <Footer />
    </div>
  </body>
</html>
