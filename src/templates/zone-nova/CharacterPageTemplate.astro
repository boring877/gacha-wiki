---
import { getFactionData } from '../../data/zone-nova/factions.js';
import SimpleOptimizedImage from '../../components/SimpleOptimizedImage.astro';

interface Props {
  characterData: any;
}

const { characterData } = Astro.props;
const factionData = getFactionData(characterData.faction);
---

<!-- Character Header & Overview -->
<section class="content-section">
  <h2 class="section-title" style="margin-bottom:2.5rem; text-align:center;">Character Overview</h2>
  <div class="overview-flex" style="gap: 2.5rem;">
    <!-- Hero Card (Left) -->
    <div
      style="flex: 1.2; min-width: 340px; max-width: 420px; display: flex; flex-direction: column; align-items: center;"
    >
      <div
        style="background: linear-gradient(135deg, var(--bg-primary) 60%, var(--neutral-50) 100%); border-radius: 18px; box-shadow: 0 4px 18px rgba(255,183,77,0.15); padding: 2.5rem 1.5rem 1.5rem 1.5rem; border: 1.5px solid var(--amber-glow); display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 420px; width: 100%;"
      >
        <div
          style="margin-bottom: 1.5rem; margin-top: 0; width: 300px; height: 300px; border-radius: 16px; box-shadow: 0 6px 24px rgba(0,172,193,0.20); max-width: 100%; border: 2px solid var(--teal-crystal); overflow: hidden;"
        >
          <SimpleOptimizedImage
            src={`/images/games/zone-nova/characters/${characterData.image}.jpg`}
            alt={`${characterData.name} - ${characterData.rarity} ${characterData.class} character from Zone Nova gacha game`}
            width={300}
            height={300}
            loading="eager"
            class="character-portrait"
          />
        </div>
        <h1
          class="character-name"
          style="margin: 0; text-align:center; background: linear-gradient(135deg, var(--amber-glow), var(--teal-crystal)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 2.2rem; font-weight: 700;"
        >
          {characterData.name}
        </h1>
        <p
          style="color: var(--teal-crystal); margin: 0.5rem 0 0 0; font-size: 1.1rem; text-align: center;"
        >
          {characterData.rarity}
          {characterData.class}
        </p>
        <p
          style="color: var(--text-secondary); margin: 0.2rem 0 0 0; font-style: italic; text-align: center;"
        >
          {factionData?.name || characterData.faction}
          {factionData?.chineseName && `(${factionData.chineseName})`}
        </p>
        {
          factionData?.description && (
            <p style="color: var(--text-muted); margin: 0.3rem 0 0 0; font-size: 0.9rem; text-align: center; line-height: 1.3; max-width: 300px; margin-left: auto; margin-right: auto;">
              {factionData.description}
            </p>
          )
        }
      </div>

      <!-- Character Info -->
      <div
        style="margin-top: 1.8rem; background: linear-gradient(135deg, var(--bg-primary) 60%, var(--neutral-50) 100%); border-radius: 14px; box-shadow: 0 3px 15px rgba(255,183,77,0.15); padding: 1.5rem; border: 1px solid var(--amber-glow); width: 100%;"
      >
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
          <div style="text-align: center;">
            <div
              style="color: var(--text-secondary); margin-bottom: 0.5rem; font-weight: 600; font-size: 0.9rem;"
            >
              Class
            </div>
            <span
              class={`class-badge ${characterData.class ? characterData.class.toLowerCase() : 'unknown'}`}
              >{characterData.class || 'TBA'}</span
            >
          </div>
          <div style="text-align: center;">
            <div
              style="color: var(--text-secondary); margin-bottom: 0.5rem; font-weight: 600; font-size: 0.9rem;"
            >
              Rarity
            </div>
            <span class={`rarity-badge ${characterData.rarity.toLowerCase()}`}
              >{characterData.rarity}</span
            >
          </div>
          <div style="text-align: center;">
            <div
              style="color: var(--text-secondary); margin-bottom: 0.5rem; font-weight: 600; font-size: 0.9rem;"
            >
              Element
            </div>
            <span class={`element-badge ${characterData.element.toLowerCase()}`}
              >{characterData.element}</span
            >
          </div>
          <div style="text-align: center;">
            <div
              style="color: var(--text-secondary); margin-bottom: 0.5rem; font-weight: 600; font-size: 0.9rem;"
            >
              Role
            </div>
            <span
              class={`role-badge ${characterData.role ? characterData.role.toLowerCase() : 'unknown'}`}
              >{characterData.role || 'TBA'}</span
            >
          </div>
          <div class="faction-section">
            <div
              style="color: var(--text-secondary); margin-bottom: 0.5rem; font-weight: 600; font-size: 0.9rem;"
            >
              Faction
            </div>
            <span
              class={`faction-badge ${(factionData?.name || characterData.faction).toLowerCase().replace(/\s+/g, '-')}`}
              style={factionData?.color
                ? `background-color: ${factionData.color}; border: 2px solid ${factionData.color}; color: white; font-weight: 700; padding: 0.5rem 1rem; border-radius: 8px; display: inline-block; box-shadow: 0 2px 8px ${factionData.color}40; text-shadow: 0 1px 2px rgba(0,0,0,0.3);`
                : 'background-color: var(--neutral-50); border: 2px solid var(--text-secondary); color: var(--text-secondary); font-weight: 700; padding: 0.5rem 1rem; border-radius: 8px; display: inline-block;'}
            >
              {factionData?.name || characterData.faction}
              {
                factionData?.chineseName && (
                  <span class="faction-chinese-name" style="margin-left: 0.5rem; font-weight: 500;">
                    ({factionData.chineseName})
                  </span>
                )
              }
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Complete Stats Box (Right) -->
    <div style="flex: 1.8; min-width: 500px;">
      <div
        style="background: linear-gradient(135deg, var(--neutral-50) 60%, var(--bg-primary) 100%); border-radius: 18px; box-shadow: 0 4px 18px rgba(0,172,193,0.15); padding: 2rem; border: 1px solid var(--teal-crystal); width: 100%;"
      >
        <!-- Base Stats -->
        <h3
          style="color: var(--text-primary); margin: 0 0 1rem 0; text-align: center; font-size: 1.4rem; border-bottom: 2px solid var(--teal-crystal); padding-bottom: 0.5rem;"
        >
          Base Stats
        </h3>

        <!-- Core Combat Stats -->
        <h4 style="color: var(--text-primary); margin: 0 0 1rem 0; font-size: 1.1rem;">
          Core Combat Stats
        </h4>
        <div
          class="stats-grid"
          style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.8rem; margin-bottom: 1.5rem;"
        >
          <div
            class="stat-item"
            style="text-align:center; background: var(--bg-primary); padding: 0.8rem; border-radius: 8px; border: 1px solid var(--amber-glow);"
          >
            <div
              class="stat-label"
              style="color: var(--text-secondary); margin-bottom: 0.3rem; font-weight: 600; font-size: 0.85rem;"
            >
              HP
            </div>
            <div
              class="stat-value"
              style="color: var(--teal-crystal); font-weight: 700; font-size: 1rem;"
            >
              {characterData.stats.hp}
            </div>
          </div>
          <div
            class="stat-item"
            style="text-align:center; background: var(--bg-primary); padding: 0.8rem; border-radius: 8px; border: 1px solid var(--amber-glow);"
          >
            <div
              class="stat-label"
              style="color: var(--text-secondary); margin-bottom: 0.3rem; font-weight: 600; font-size: 0.85rem;"
            >
              Attack
            </div>
            <div
              class="stat-value"
              style="color: var(--teal-crystal); font-weight: 700; font-size: 1rem;"
            >
              {characterData.stats.attack}
            </div>
          </div>
          <div
            class="stat-item"
            style="text-align:center; background: var(--bg-primary); padding: 0.8rem; border-radius: 8px; border: 1px solid var(--amber-glow);"
          >
            <div
              class="stat-label"
              style="color: var(--text-secondary); margin-bottom: 0.3rem; font-weight: 600; font-size: 0.85rem;"
            >
              Defense
            </div>
            <div
              class="stat-value"
              style="color: var(--teal-crystal); font-weight: 700; font-size: 1rem;"
            >
              {characterData.stats.defense}
            </div>
          </div>
        </div>

        <!-- Additional Stats -->
        <h4 style="color: var(--text-primary); margin: 0 0 1rem 0; font-size: 1.1rem;">
          Additional Stats
        </h4>
        <div
          class="stats-grid"
          style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.8rem;"
        >
          <div
            class="stat-item"
            style="text-align:center; background: var(--bg-primary); padding: 0.8rem; border-radius: 8px; border: 1px solid var(--amber-glow);"
          >
            <div
              class="stat-label"
              style="color: var(--text-secondary); margin-bottom: 0.3rem; font-weight: 600; font-size: 0.8rem;"
            >
              Energy Regen
            </div>
            <div
              class="stat-value"
              style="color: var(--teal-crystal); font-weight: 700; font-size: 0.95rem;"
            >
              0.25/s
            </div>
          </div>
          <div
            class="stat-item"
            style="text-align:center; background: var(--bg-primary); padding: 0.8rem; border-radius: 8px; border: 1px solid var(--amber-glow);"
          >
            <div
              class="stat-label"
              style="color: var(--text-secondary); margin-bottom: 0.3rem; font-weight: 600; font-size: 0.8rem;"
            >
              Crit Rate
            </div>
            <div
              class="stat-value"
              style="color: var(--teal-crystal); font-weight: 700; font-size: 0.95rem;"
            >
              0%
            </div>
          </div>
          <div
            class="stat-item"
            style="text-align:center; background: var(--bg-primary); padding: 0.8rem; border-radius: 8px; border: 1px solid var(--amber-glow);"
          >
            <div
              class="stat-label"
              style="color: var(--text-secondary); margin-bottom: 0.3rem; font-weight: 600; font-size: 0.8rem;"
            >
              Crit Damage
            </div>
            <div
              class="stat-value"
              style="color: var(--teal-crystal); font-weight: 700; font-size: 0.95rem;"
            >
              50%
            </div>
          </div>
        </div>

        <!-- Class Section -->
        <h4 style="color: var(--text-primary); margin: 1.5rem 0 1rem 0; font-size: 1.1rem;">
          Class
        </h4>
        <div
          style="background: var(--bg-primary); border-radius: 12px; padding: 1.5rem; border: 1px solid var(--amber-glow); display: flex; align-items: center; gap: 1.5rem;"
        >
          <img
            src={`/images/games/zone-nova/classes/1${characterData.class}.jpg`}
            alt={`${characterData.class} class icon`}
            width="48"
            height="48"
            loading="lazy"
            style="border-radius: 8px; object-fit: contain; background: rgba(255, 255, 255, 0.1); padding: 4px; border: 1px solid var(--teal-crystal);"
          />
          <div style="flex: 1;">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem;">
              <span
                class={`class-badge ${characterData.class ? characterData.class.toLowerCase() : 'unknown'}`}
                >{characterData.class || 'TBA'}</span
              >
              <span style="color: var(--text-secondary); font-size: 0.9rem;"
                >({characterData.role} Role)</span
              >
            </div>
            <p style="color: var(--text-muted); margin: 0; font-size: 0.85rem; line-height: 1.4;">
              Memory Compatibility: <strong style="color: var(--teal-crystal);"
                >{characterData.class}</strong
              > class only
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Skills Section -->
<section class="content-section">
  <h2 class="section-title">Skills</h2>

  <div
    class="skill-card"
    style="background: linear-gradient(135deg, var(--bg-primary) 0%, var(--neutral-50) 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; border-left: 4px solid var(--amber-glow); box-shadow: 0 2px 8px rgba(255,183,77,0.1); border: 1px solid var(--amber-glow);"
  >
    <div
      style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.8rem; flex-wrap: wrap; gap: 0.5rem;"
    >
      <h3 style="color: var(--text-primary); font-size: 1.3rem; font-weight: 700; margin: 0;">
        {characterData.skills.normal.name}
      </h3>
      <span class="skill-badge normal-attack"> Normal Attack </span>
    </div>
    <p style="color: var(--text-primary); line-height: 1.6; margin: 0; font-size: 1rem;">
      {characterData.skills.normal.description}
    </p>
  </div>

  <div
    class="skill-card"
    style="background: linear-gradient(135deg, var(--bg-primary) 0%, var(--neutral-50) 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; border-left: 4px solid var(--teal-crystal); box-shadow: 0 2px 8px rgba(0,172,193,0.1); border: 1px solid var(--teal-crystal);"
  >
    <div
      style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.8rem; flex-wrap: wrap; gap: 0.5rem;"
    >
      <h3 style="color: var(--text-primary); font-size: 1.3rem; font-weight: 700; margin: 0;">
        {characterData.skills.auto.name}
      </h3>
      <div style="display:flex; align-items:center; gap:0.5rem;">
        <span class="skill-badge auto-skill"> Auto Skill </span>
        <span style="color: var(--teal-crystal); font-size:0.95rem; font-weight:600;">
          Cooldown: {characterData.skills.auto.cooldown}
        </span>
      </div>
    </div>
    <p style="color: var(--text-primary); line-height: 1.6; margin: 0; font-size: 1rem;">
      {characterData.skills.auto.description}
    </p>
  </div>

  <div
    class="skill-card"
    style="background: linear-gradient(135deg, var(--bg-primary) 0%, var(--neutral-50) 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; border-left: 4px solid var(--amber-glow); box-shadow: 0 2px 8px rgba(255,183,77,0.1); border: 1px solid var(--amber-glow);"
  >
    <div
      style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.8rem; flex-wrap: wrap; gap: 0.5rem;"
    >
      <h3 style="color: var(--text-primary); font-size: 1.3rem; font-weight: 700; margin: 0;">
        {characterData.skills.ultimate.name}
      </h3>
      <div style="display:flex; align-items:center; gap:0.5rem;">
        <span class="skill-badge ultimate"> Ultimate </span>
        <span style="color: var(--amber-glow); font-size:0.95rem; font-weight:600;">
          Cost: {characterData.skills.ultimate.energyCost}
        </span>
      </div>
    </div>
    <p style="color: var(--text-primary); line-height: 1.6; margin: 0; font-size: 1rem;">
      {characterData.skills.ultimate.description}
    </p>
  </div>

  <div
    class="skill-card"
    style="background: linear-gradient(135deg, var(--bg-primary) 0%, var(--neutral-50) 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; border-left: 4px solid var(--rose-quartz); box-shadow: 0 2px 8px rgba(233,30,99,0.1); border: 1px solid var(--rose-quartz);"
  >
    <div
      style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.8rem; flex-wrap: wrap; gap: 0.5rem;"
    >
      <h3 style="color: var(--text-primary); font-size: 1.3rem; font-weight: 700; margin: 0;">
        {characterData.skills.passive.name}
      </h3>
      <span class="skill-badge passive"> Passive </span>
    </div>
    <p style="color: var(--text-primary); line-height: 1.6; margin: 0; font-size: 1rem;">
      {characterData.skills.passive.description}
    </p>
  </div>

  <!-- Team Skill -->
  <div
    class="skill-card"
    style="background: linear-gradient(135deg, var(--bg-primary) 0%, var(--neutral-50) 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; border-left: 4px solid var(--cosmic-purple); box-shadow: 0 2px 8px rgba(138,43,226,0.1); border: 1px solid var(--cosmic-purple);"
  >
    <div
      style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.8rem; flex-wrap: wrap; gap: 0.5rem;"
    >
      <h3 style="color: var(--text-primary); font-size: 1.3rem; font-weight: 700; margin: 0;">
        {characterData.teamSkill.name}
      </h3>
      <span class="skill-badge team-skill"> Team Skill </span>
    </div>
    <p style="color: var(--text-primary); line-height: 1.6; margin: 0 0 1rem 0; font-size: 1rem;">
      {characterData.teamSkill.description}
    </p>
    <div
      style="background: rgba(138,43,226,0.1); padding: 0.75rem; border-radius: 8px; margin-top: 0.5rem; border: 1px solid rgba(138,43,226,0.2);"
    >
      <strong style="color: var(--cosmic-purple);">Requires:</strong>
      <span style="color: var(--text-primary);">
        2 {characterData.teamSkill.requirements.faction} OR 2 {
          characterData.teamSkill.requirements.element
        } characters</span
      >
    </div>
  </div>
</section>

<!-- Node Tree Section -->
<section class="content-section">
  <h2 class="section-title">Node Tree</h2>

  <!-- Node Tree Description -->
  <div
    class="node-tree-description"
    style="background: linear-gradient(135deg, var(--bg-primary) 0%, var(--neutral-50) 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 2.5rem; border: 2px solid var(--teal-crystal); box-shadow: 0 4px 18px rgba(0,172,193,0.15);"
  >
    <div class="description-content" style="display: flex; align-items: flex-start; gap: 1.5rem;">
      <div class="description-image" style="flex-shrink: 0;">
        <img
          src="/images/games/zone-nova/nodetree/FullTree.jpg"
          alt="Complete Node Tree"
          width="120"
          height="120"
          style="border-radius: 8px; border: 2px solid var(--teal-crystal); box-shadow: 0 4px 12px rgba(0,172,193,0.2);"
          loading="lazy"
        />
      </div>
      <div class="description-text" style="flex: 1; min-width: 0;">
        <p
          style="color: var(--text-primary); font-size: 1.1rem; line-height: 1.6; margin: 0 0 1rem 0;"
        >
          This is the <strong style="color: var(--teal-crystal);">Node Tree</strong> - there are 3 main
          components:
        </p>
        <ul
          class="node-components"
          style="color: var(--text-primary); font-size: 1rem; line-height: 1.6; margin: 0; padding-left: 1.5rem;"
        >
          <li style="margin-bottom: 0.8rem;">
            <strong style="color: var(--amber-glow);">Skills</strong> - Level up to 10 and unlock the
            last 4 levels on Dupe 3 and 5
          </li>
          <li style="margin-bottom: 0.8rem;">
            <strong style="color: var(--teal-crystal);">3 Main Segments</strong> - Give the most boosts
            (45% HP and ATK total), providing massive stat increases that are very important
          </li>
          <li style="margin-bottom: 0;">
            <strong style="color: var(--cosmic-purple);">Stat Nodes</strong> - 10 specialized nodes depending
            on the character's main kit
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- 1. Skill Level Up -->
  <h3 style="color: var(--text-primary); margin: 2rem 0 1rem 0; font-size: 1.4rem;">
    1. Skill Level Up
  </h3>
  <p style="color: var(--text-secondary); margin-bottom: 1.5rem; font-size: 1rem;">
    5 types of skills that can be leveled up:
  </p>

  <div
    class="skill-levelup-section"
    style="display: flex; align-items: flex-start; gap: 1.5rem; margin-bottom: 2rem;"
  >
    <div class="skill-image" style="flex-shrink: 0;">
      <img
        src="/images/games/zone-nova/nodetree/skills.jpg"
        alt="Skill Node Tree"
        width="100"
        height="100"
        style="border-radius: 8px; border: 2px solid var(--amber-glow);"
        loading="lazy"
      />
    </div>
    <div class="skill-content" style="flex: 1; min-width: 0;">
      <div
        style="background: var(--bg-primary); border: 1px solid var(--amber-glow); border-radius: 12px; padding: 1.2rem;"
      >
        <h4 style="color: var(--amber-glow); margin: 0 0 1rem 0; font-size: 1.1rem;">
          Skill Types:
        </h4>
        <div
          class="skill-grid"
          style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 0.6rem;"
        >
          <div
            style="background: rgba(255,183,77,0.1); border: 1px solid rgba(255,183,77,0.2); border-radius: 6px; padding: 0.6rem; text-align: center;"
          >
            <div style="color: var(--text-primary); font-weight: 600; font-size: 0.85rem;">
              Normal Attack
            </div>
          </div>
          <div
            style="background: rgba(0,172,193,0.1); border: 1px solid rgba(0,172,193,0.2); border-radius: 6px; padding: 0.6rem; text-align: center;"
          >
            <div style="color: var(--text-primary); font-weight: 600; font-size: 0.85rem;">
              Auto Skill
            </div>
          </div>
          <div
            style="background: rgba(255,183,77,0.1); border: 1px solid rgba(255,183,77,0.2); border-radius: 6px; padding: 0.6rem; text-align: center;"
          >
            <div style="color: var(--text-primary); font-weight: 600; font-size: 0.85rem;">
              Ultimate
            </div>
          </div>
          <div
            style="background: rgba(233,30,99,0.1); border: 1px solid rgba(233,30,99,0.2); border-radius: 6px; padding: 0.6rem; text-align: center;"
          >
            <div style="color: var(--text-primary); font-weight: 600; font-size: 0.85rem;">
              Passive
            </div>
          </div>
          <div
            style="background: rgba(138,43,226,0.1); border: 1px solid rgba(138,43,226,0.2); border-radius: 6px; padding: 0.6rem; text-align: center;"
          >
            <div style="color: var(--text-primary); font-weight: 600; font-size: 0.85rem;">
              Team Skill
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 2. ATK & HP Increase -->
  <h3 style="color: var(--text-primary); margin: 2rem 0 1rem 0; font-size: 1.4rem;">
    2. ATK & HP Increase
  </h3>
  <p style="color: var(--text-secondary); margin-bottom: 1.5rem; font-size: 1rem;">
    3 tiers of stat increases - prioritize these first!
  </p>

  <div
    class="atk-hp-nodes"
    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;"
  >
    <div
      class="node-tier"
      style="background: var(--bg-primary); border: 2px solid var(--teal-crystal); border-radius: 12px; padding: 1.2rem; display: flex; align-items: center; gap: 0.8rem;"
    >
      <img
        src="/images/games/zone-nova/nodetree/1.jpg"
        alt="10% ATK & HP Node"
        width="45"
        height="45"
        style="border-radius: 6px; border: 1px solid var(--teal-crystal); flex-shrink: 0;"
        loading="lazy"
      />
      <div style="min-width: 0;">
        <div style="color: var(--teal-crystal); font-weight: 700; font-size: 1rem;">
          10% ATK & HP
        </div>
        <div style="color: var(--text-secondary); font-size: 0.85rem;">Rank 2 Required</div>
      </div>
    </div>
    <div
      class="node-tier"
      style="background: var(--bg-primary); border: 2px solid var(--amber-glow); border-radius: 12px; padding: 1.2rem; display: flex; align-items: center; gap: 0.8rem;"
    >
      <img
        src="/images/games/zone-nova/nodetree/2.jpg"
        alt="15% ATK & HP Node"
        width="45"
        height="45"
        style="border-radius: 6px; border: 1px solid var(--amber-glow); flex-shrink: 0;"
        loading="lazy"
      />
      <div style="min-width: 0;">
        <div style="color: var(--amber-glow); font-weight: 700; font-size: 1rem;">15% ATK & HP</div>
        <div style="color: var(--text-secondary); font-size: 0.85rem;">Rank 4 Required</div>
      </div>
    </div>
    <div
      class="node-tier"
      style="background: var(--bg-primary); border: 2px solid var(--rose-quartz); border-radius: 12px; padding: 1.2rem; display: flex; align-items: center; gap: 0.8rem;"
    >
      <img
        src="/images/games/zone-nova/nodetree/3.jpg"
        alt="20% ATK & HP Node"
        width="45"
        height="45"
        style="border-radius: 6px; border: 1px solid var(--rose-quartz); flex-shrink: 0;"
        loading="lazy"
      />
      <div style="min-width: 0;">
        <div style="color: var(--rose-quartz); font-weight: 700; font-size: 1rem;">
          20% ATK & HP
        </div>
        <div style="color: var(--text-secondary); font-size: 0.85rem;">Rank 6 Required</div>
      </div>
    </div>
  </div>

  <div
    style="background: rgba(0,172,193,0.1); border-radius: 8px; padding: 1rem; border: 1px solid rgba(0,172,193,0.2); margin-bottom: 2rem;"
  >
    <p style="color: var(--text-primary); margin: 0; font-weight: 600;">
      💡 Materials can be farmed in dungeons and weekly dungeons. These provide the most stats
      increase!
    </p>
  </div>

  <!-- 3. Stat Increase Nodes -->
  <h3 style="color: var(--text-primary); margin: 2rem 0 1rem 0; font-size: 1.4rem;">
    3. Stat Increase Nodes
  </h3>
  <p style="color: var(--text-secondary); margin-bottom: 1.5rem; font-size: 1rem;">
    Each character has 10 unique stat nodes. Activate 8 by level 70!
  </p>

  <div
    class="stat-nodes-info"
    style="background: var(--bg-primary); border: 1px solid var(--cosmic-purple); border-radius: 12px; padding: 1.2rem; margin-bottom: 1.5rem;"
  >
    <h4 style="color: var(--cosmic-purple); margin: 0 0 1rem 0; font-size: 1.1rem;">
      Available Stat Types:
    </h4>
    <div
      class="stat-grid"
      style="display: grid; grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); gap: 0.5rem;"
    >
      <div
        style="background: rgba(138,43,226,0.1); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; border: 1px solid rgba(138,43,226,0.2);"
      >
        <span style="color: var(--text-primary); font-weight: 600; font-size: 0.8rem;"
          >ATK Increase</span
        >
      </div>
      <div
        style="background: rgba(138,43,226,0.1); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; border: 1px solid rgba(138,43,226,0.2);"
      >
        <span style="color: var(--text-primary); font-weight: 600; font-size: 0.8rem;"
          >DEF Increase</span
        >
      </div>
      <div
        style="background: rgba(138,43,226,0.1); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; border: 1px solid rgba(138,43,226,0.2);"
      >
        <span style="color: var(--text-primary); font-weight: 600; font-size: 0.8rem;"
          >HP Increase</span
        >
      </div>
      <div
        style="background: rgba(138,43,226,0.1); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; border: 1px solid rgba(138,43,226,0.2);"
      >
        <span style="color: var(--text-primary); font-weight: 600; font-size: 0.8rem;"
          >Healing Inc</span
        >
      </div>
      <div
        style="background: rgba(138,43,226,0.1); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; border: 1px solid rgba(138,43,226,0.2);"
      >
        <span style="color: var(--text-primary); font-weight: 600; font-size: 0.8rem;"
          >Penetration</span
        >
      </div>
      <div
        style="background: rgba(138,43,226,0.1); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; border: 1px solid rgba(138,43,226,0.2);"
      >
        <span style="color: var(--text-primary); font-weight: 600; font-size: 0.8rem;"
          >Element Inc</span
        >
      </div>
      <div
        style="background: rgba(138,43,226,0.1); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; border: 1px solid rgba(138,43,226,0.2);"
      >
        <span style="color: var(--text-primary); font-weight: 600; font-size: 0.8rem;"
          >Crit Rate</span
        >
      </div>
      <div
        style="background: rgba(138,43,226,0.1); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; border: 1px solid rgba(138,43,226,0.2);"
      >
        <span style="color: var(--text-primary); font-weight: 600; font-size: 0.8rem;"
          >Crit Damage</span
        >
      </div>
    </div>
  </div>

  <div
    style="background: rgba(255,183,77,0.1); border-radius: 8px; padding: 1rem; border: 1px solid rgba(255,183,77,0.2);"
  >
    <p style="color: var(--text-primary); margin: 0; font-weight: 600;">
      📋 <strong>Note:</strong> Some nodes require Level 80, others unlock earlier. Activation requirements
      are fairly simple.
    </p>
  </div>
</section>

<!-- Awakening Effects -->
<section class="content-section">
  <h2 class="section-title">Awakening Effects</h2>
  {
    characterData.awakenings.map((awakening, index) => (
      <div
        class="skill-card"
        style={`background: linear-gradient(135deg, var(--bg-primary) 0%, var(--neutral-50) 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; border-left: 4px solid ${awakening.level <= 3 ? 'var(--teal-crystal)' : awakening.level <= 5 ? 'var(--amber-glow)' : 'var(--rose-quartz)'}; box-shadow: 0 2px 8px rgba(0,172,193,0.1); border: 1px solid var(--teal-crystal);`}
      >
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.8rem; flex-wrap: wrap; gap: 0.5rem;">
          <h3 style="color: var(--text-primary); font-size: 1.3rem; font-weight: 700; margin: 0;">
            Dupe {awakening.level}
          </h3>
          <span class={`awakening-badge dupe-${awakening.level}`}>Dupe {awakening.level}</span>
        </div>
        <p style="color: var(--text-primary); line-height: 1.6; margin: 0; font-size: 1rem;">
          <strong>Effect:</strong> {awakening.effect}
        </p>
      </div>
    ))
  }
</section>

<!-- Memory Card Section -->
<section class="content-section">
  <h2 class="section-title">
    Memory Card: {characterData.memoryCard.name}
  </h2>

  <div class="overview-flex" style="gap: 2.5rem; margin-bottom: 2rem;">
    <!-- Memory Card Image (Left) -->
    <div
      style="flex: 1; min-width: 200px; max-width: 300px; display: flex; justify-content: center;"
    >
      <div
        style="background: linear-gradient(135deg, var(--bg-primary) 60%, var(--neutral-50) 100%); border-radius: 18px; box-shadow: 0 4px 18px rgba(0,172,193,0.15); padding: 1.5rem; border: 1.5px solid var(--teal-crystal); display: flex; justify-content: center; align-items: center;"
      >
        <div
          style="width: 200px; height: 300px; border-radius: 16px; box-shadow: 0 6px 24px rgba(0,172,193,0.20); overflow: hidden;"
        >
          <SimpleOptimizedImage
            src={`/images/games/zone-nova/memories/${characterData.memoryCard.image}.jpg`}
            alt={characterData.memoryCard.name}
            width={200}
            height={300}
            loading="lazy"
          />
        </div>
      </div>
    </div>

    <!-- Memory Stats (Right) -->
    <div style="flex: 2; min-width: 300px;">
      <div
        style="background: linear-gradient(135deg, var(--neutral-50) 60%, var(--bg-primary) 100%); border-radius: 18px; box-shadow: 0 4px 18px rgba(0,172,193,0.15); padding: 2rem; border: 1px solid var(--teal-crystal); width: 100%;"
      >
        <h3
          style="color: var(--text-primary); margin: 0 0 1rem 0; text-align: center; font-size: 1.4rem; border-bottom: 2px solid var(--teal-crystal); padding-bottom: 0.5rem;"
        >
          Memory Card Stats
        </h3>

        <div
          class="stats-grid"
          style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.8rem; margin-bottom: 1.5rem;"
        >
          <div
            class="stat-item"
            style="text-align:center; background: var(--bg-primary); padding: 0.8rem; border-radius: 8px; border: 1px solid var(--amber-glow);"
          >
            <div
              class="stat-label"
              style="color: var(--text-secondary); margin-bottom: 0.3rem; font-weight: 600; font-size: 0.85rem;"
            >
              HP
            </div>
            <div
              class="stat-value"
              style="color: var(--teal-crystal); font-weight: 700; font-size: 1rem;"
            >
              {characterData.memoryCard.stats.hp}
            </div>
          </div>
          <div
            class="stat-item"
            style="text-align:center; background: var(--bg-primary); padding: 0.8rem; border-radius: 8px; border: 1px solid var(--amber-glow);"
          >
            <div
              class="stat-label"
              style="color: var(--text-secondary); margin-bottom: 0.3rem; font-weight: 600; font-size: 0.85rem;"
            >
              Attack
            </div>
            <div
              class="stat-value"
              style="color: var(--teal-crystal); font-weight: 700; font-size: 1rem;"
            >
              {characterData.memoryCard.stats.attack}
            </div>
          </div>
          <div
            class="stat-item"
            style="text-align:center; background: var(--bg-primary); padding: 0.8rem; border-radius: 8px; border: 1px solid var(--amber-glow);"
          >
            <div
              class="stat-label"
              style="color: var(--text-secondary); margin-bottom: 0.3rem; font-weight: 600; font-size: 0.85rem;"
            >
              Defense
            </div>
            <div
              class="stat-value"
              style="color: var(--teal-crystal); font-weight: 700; font-size: 1rem;"
            >
              {characterData.memoryCard.stats.defense}
            </div>
          </div>
        </div>

        <!-- Memory Effects -->
        <h4 style="color: var(--text-primary); margin: 1.5rem 0 1rem 0; font-size: 1.1rem;">
          Memory Effects
        </h4>
        {
          characterData.memoryCard.effects.map(effect => (
            <div style="background: rgba(0,172,193,0.1); border-radius: 8px; padding: 0.75rem 1rem; margin-bottom: 0.5rem; border: 1px solid rgba(0,172,193,0.2);">
              <p style="color: var(--text-primary); margin: 0; font-size: 1rem;">• {effect}</p>
            </div>
          ))
        }
      </div>
    </div>
  </div>

  <!-- Equipment Limitation -->
  <div
    style="background: linear-gradient(135deg, rgba(233,30,99,0.1) 0%, rgba(233,30,99,0.05) 100%); border-radius: 12px; padding: 1.5rem; border: 2px solid var(--rose-quartz); position: relative; overflow: hidden; margin-top: 1.5rem;"
  >
    <div style="position: relative; z-index: 1;">
      <!-- Title -->
      <div style="text-align: center; margin-bottom: 1.5rem;">
        <h4
          style="background: linear-gradient(135deg, var(--rose-quartz), #c2185b); color: #fff; padding: 0.75rem 1.5rem; border-radius: 12px; font-weight: 800; font-size: 1rem; text-transform: uppercase; letter-spacing: 0.1em; box-shadow: 0 3px 8px rgba(233,30,99,0.3); margin: 0; display: inline-block;"
        >
          ⚠️ Equipment Limitation
        </h4>
      </div>

      <!-- Content Layout: Image Left, Text Right -->
      {
        characterData.class && (
          <div style="display: flex; align-items: center; gap: 2rem; max-width: 600px; margin: 0 auto;">
            {/* Image on Left */}
            <div style="flex-shrink: 0;">
              <img
                src={`/images/games/zone-nova/classes/1${characterData.class}.jpg`}
                alt={characterData.class}
                width="80"
                height="80"
                style="border-radius: 10px; object-fit: cover; box-shadow: 0 3px 10px rgba(233,30,99,0.2); border: 2px solid var(--rose-quartz);"
                loading="lazy"
              />
            </div>

            {/* Content on Right */}
            <div style="flex: 1; text-align: left;">
              <h5 style="margin: 0 0 0.75rem 0; color: var(--rose-quartz); font-size: 1.3rem; font-weight: 800; text-transform: uppercase; line-height: 1.2;">
                {characterData.class} Class Only
              </h5>
              <p style="margin: 0; color: var(--text-primary); font-weight: 600; font-size: 1rem; line-height: 1.5;">
                This memory card is restricted to{' '}
                <strong style="color: var(--rose-quartz);">{characterData.class}</strong> class
                characters only.
              </p>
            </div>
          </div>
        )
      }
    </div>

    <!-- Decorative background pattern -->
    <div
      style="position: absolute; top: 0; right: 0; width: 60px; height: 60px; background: radial-gradient(circle, rgba(233,30,99,0.1), transparent); border-radius: 50%; transform: translate(50%, -50%);"
    >
    </div>
    <div
      style="position: absolute; bottom: 0; left: 0; width: 50px; height: 50px; background: radial-gradient(circle, rgba(233,30,99,0.08), transparent); border-radius: 50%; transform: translate(-40%, 40%);"
    >
    </div>
  </div>
</section>

<!-- Mobile-responsive CSS for Node Tree section -->
<style>
  @media (max-width: 768px) {
    /* Node Tree Description - Better mobile layout */
    .node-tree-description {
      padding: 1.2rem !important;
    }

    .node-tree-description .description-content {
      flex-direction: column !important;
      align-items: center !important;
      text-align: center !important;
      gap: 1.2rem !important;
    }

    .node-tree-description .description-image {
      background: rgba(0, 172, 193, 0.1) !important;
      padding: 0.8rem !important;
      border-radius: 12px !important;
      border: 1px solid rgba(0, 172, 193, 0.3) !important;
    }

    .node-tree-description .description-image img {
      width: 100px !important;
      height: 100px !important;
      border: 1px solid var(--teal-crystal) !important;
    }

    .node-tree-description .node-components {
      padding-left: 1rem !important;
    }

    /* Skill Level Up - Better mobile layout with image */
    .skill-levelup-section {
      flex-direction: column !important;
      align-items: center !important;
      gap: 1.2rem !important;
    }

    .skill-levelup-section .skill-image {
      background: rgba(255, 183, 77, 0.1) !important;
      padding: 1rem !important;
      border-radius: 12px !important;
      border: 1px solid rgba(255, 183, 77, 0.3) !important;
    }

    .skill-levelup-section .skill-image img {
      width: 80px !important;
      height: 80px !important;
      border-radius: 8px !important;
    }

    .skill-levelup-section .skill-content {
      width: 100% !important;
    }

    .skill-levelup-section .skill-content > div {
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--neutral-50) 100%) !important;
      border: 2px solid var(--amber-glow) !important;
      box-shadow: 0 2px 12px rgba(255, 183, 77, 0.15) !important;
    }

    .skill-grid {
      grid-template-columns: repeat(2, 1fr) !important;
      gap: 0.8rem !important;
    }

    .skill-grid > div {
      padding: 0.8rem !important;
      border-radius: 8px !important;
    }

    /* ATK & HP Nodes - Better mobile cards */
    .atk-hp-nodes {
      grid-template-columns: 1fr !important;
      gap: 1rem !important;
    }

    .node-tier {
      padding: 1.2rem !important;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1) !important;
    }

    .node-tier img {
      width: 50px !important;
      height: 50px !important;
      border-radius: 8px !important;
    }

    /* Stat Nodes - Clean mobile grid */
    .stat-nodes-info {
      padding: 1.2rem !important;
    }

    .stat-grid {
      grid-template-columns: repeat(2, 1fr) !important;
      gap: 0.6rem !important;
    }

    .stat-grid > div {
      padding: 0.6rem 0.4rem !important;
      border-radius: 8px !important;
    }

    .stat-grid span {
      font-size: 0.8rem !important;
    }
  }

  @media (max-width: 480px) {
    /* Extra small screens */
    .node-tree-description {
      padding: 1rem !important;
    }

    .skill-levelup-section .skill-content > div {
      padding: 1rem !important;
    }

    .stat-grid {
      grid-template-columns: repeat(2, 1fr) !important;
    }

    .atk-hp-nodes .node-tier {
      padding: 0.8rem !important;
      gap: 0.6rem !important;
    }
  }
</style>

<!-- Minimal JavaScript for progressive enhancement -->
<script>
  // Lazy load images that aren't immediately visible
  if ('IntersectionObserver' in window) {
    const images = document.querySelectorAll('img[loading="lazy"]');
    const imageObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target as HTMLImageElement;
          img.setAttribute('loading', 'eager');
          observer.unobserve(entry.target);
        }
      });
    });
    images.forEach(img => imageObserver.observe(img));
  }
</script>
