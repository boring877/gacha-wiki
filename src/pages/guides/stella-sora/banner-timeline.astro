---
import BannerTimelineLayout from '../../../layouts/stella-sora/BannerTimelineLayout.astro';
import SSBannerImage from '../../../components/stella-sora/SSBannerImage.astro';
import { bannerTimelineData } from '../../../data/stella-sora/banner-timeline.js';

// SEO metadata
const pageTitle = 'Stella Sora Banner Timeline - Limited Recruitment Events';
const pageDescription =
  'Chronological timeline of limited recruitment banners in Stella Sora. View current and past character and disc recruitment events organized by date from newest to oldest.';
const gameTitle = 'Banner Timeline';

// Helper function to format date
const formatDate = (dateString: string) => {
  const date = new Date(dateString);
  const options: Intl.DateTimeFormatOptions = { month: 'short', day: '2-digit', year: 'numeric' };
  return date.toLocaleDateString('en-US', options);
};
---

<BannerTimelineLayout title={pageTitle} description={pageDescription} gameTitle={gameTitle}>
  <meta slot="head" />
  <meta
    name="keywords"
    content="Stella Sora, banner timeline, recruitment events, limited banners, character banners, disc banners"
  />
  <meta name="author" content="GachaWiki" />
  <meta property="og:title" content={pageTitle} />
  <meta property="og:description" content={pageDescription} />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://gacha.wiki/guides/stella-sora/banner-timeline" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={pageTitle} />
  <meta name="twitter:description" content={pageDescription} />

  <main class="banner-timeline-content" role="main">
    <header>
      <h1>Stella Sora Banner Timeline</h1>
      <p class="intro-text">All the banner timeline here !</p>
    </header>

    {
      bannerTimelineData.map((banner, index) => (
        <article class="banner-section">
          <header class="banner-header">
            <h2>#{bannerTimelineData.length - index} Recruitment Events</h2>
          </header>

          <section class="banner-content">
            {/* Character Banner */}
            <section class="banner-subsection">
              <div class="banner-info">
                <h3>Character Banner: {banner.characterBanner.title}</h3>
                <div class="featured-item">
                  <SSBannerImage
                    name={banner.characterBanner.featuredCharacter.name}
                    alt={banner.characterBanner.featuredCharacter.name}
                    type="character"
                    width={300}
                    height={300}
                  />
                  <div class="featured-details">
                    <p>
                      <strong>Featured:</strong> {banner.characterBanner.featuredCharacter.rarity}{' '}
                      {banner.characterBanner.featuredCharacter.type}{' '}
                      {banner.characterBanner.featuredCharacter.name}
                    </p>
                    <p>
                      <strong>Period:</strong> {formatDate(banner.characterBanner.startDate)} -{' '}
                      {formatDate(banner.characterBanner.endDate)} (UTC-7)
                    </p>
                  </div>
                </div>
                <div class="banner-details">
                  <p>
                    <strong>Details:</strong> {banner.characterBanner.description}
                  </p>
                  <p>
                    <strong>Boosted ★4 Trekkers:</strong>{' '}
                    {banner.characterBanner.boostedCharacters.map(c => c.name).join(' and ')}
                  </p>
                  {banner.characterBanner.note && (
                    <p>
                      <strong>Note:</strong> {banner.characterBanner.note}
                    </p>
                  )}
                </div>
              </div>
            </section>

            {/* Disc Banner */}
            <section class="banner-subsection">
              <div class="banner-info">
                <h3>Disc Banner: {banner.discBanner.title}</h3>
                <div class="featured-item">
                  <SSBannerImage
                    name={banner.discBanner.featuredDisc.name}
                    alt={banner.discBanner.featuredDisc.name}
                    type="disc"
                    width={300}
                    height={300}
                  />
                  <div class="featured-details">
                    <p>
                      <strong>Featured:</strong> {banner.discBanner.featuredDisc.rarity}{' '}
                      {banner.discBanner.featuredDisc.type} {banner.discBanner.featuredDisc.name}
                    </p>
                    <p>
                      <strong>Period:</strong> {formatDate(banner.discBanner.startDate)} -{' '}
                      {formatDate(banner.discBanner.endDate)} (UTC-7)
                    </p>
                  </div>
                </div>
                <div class="banner-details">
                  <p>
                    <strong>Details:</strong> {banner.discBanner.description}
                  </p>
                  <p>
                    <strong>Boosted ★4 Discs:</strong>{' '}
                    {banner.discBanner.boostedDiscs.map(d => d.name).join(' and ')}
                  </p>
                  {banner.discBanner.note && (
                    <p>
                      <strong>Note:</strong> {banner.discBanner.note}
                    </p>
                  )}
                </div>
              </div>
            </section>
          </section>
        </article>
      ))
    }
  </main>
</BannerTimelineLayout>
