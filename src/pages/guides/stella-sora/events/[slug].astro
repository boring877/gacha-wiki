---
import EventIndividualLayout from '../../../../layouts/stella-sora/EventIndividualLayout.astro';
import { stellaSoraEvents } from '../../../../data/stella-sora/events.js';
import SSEventImage from '../../../../components/stella-sora/SSEventImage.astro';

export async function getStaticPaths() {
  const { stellaSoraEvents } = await import('../../../../data/stella-sora/events.js');

  return stellaSoraEvents.map(event => ({
    params: { slug: event.id },
    props: { event },
  }));
}

const { event } = Astro.props;

// SEO metadata
const metaTitle = `${event.title} - Stella Sora Event | GachaWiki`;
const metaDescription = event.description;

// Get event data
const currentEvent = stellaSoraEvents.find(e => e.id === event.id) || event;
---

<EventIndividualLayout
  title={metaTitle}
  description={metaDescription}
  gameTitle={event.title}
  image={event.featuredImage}
>
  <!-- Structured Data for Individual Event -->
  <script
    type="application/ld+json"
    set:html={JSON.stringify({
      '@context': 'https://schema.org',
      '@type': 'Event',
      name: event.title,
      description: event.description,
      startDate: event.startDate,
      endDate: event.endDate,
      url: `https://gachawiki.info/guides/stella-sora/events/${event.id}/`,
      image: event.featuredImage,
      location: {
        '@type': 'VirtualLocation',
        url: 'https://stellasora.global/',
      },
      organizer: {
        '@type': 'Organization',
        name: 'Yostar Limited',
        url: 'https://yo-star.com',
      },
      about: {
        '@type': 'VideoGame',
        name: 'Stella Sora',
      },
    })}
  />

  <section class="event-hero-section">
    <div class="event-hero-image">
      {
        currentEvent.id === 'version-1-3-a-breezy-romance' ? (
          <div />
        ) : currentEvent.id === 'version-1-2-new-trekker-fuyuka' ? (
          <div />
        ) : currentEvent.id === 'beyond-the-dream-limited-event' ? (
          <div />
        ) : currentEvent.id === 'ghost-ship-event-shop' ? (
          <div />
        ) : currentEvent.id === 'ghost-ship-event-details' ? (
          <div />
        ) : currentEvent.id === 'guild-sweet-guild' ? (
          <div />
        ) : currentEvent.id === 'a-finale-echoing' ? (
          <SSEventImage
            imageName="3/1"
            alt={`${event.title} - Opera Ghost: Rovina`}
            width={1200}
            height={600}
            loading="eager"
          />
        ) : (
          <SSEventImage
            imageName={`${currentEvent.id.includes('event-shop') ? '1' : '2'}/1`}
            alt={`${event.title} main image`}
            width={1200}
            height={600}
            loading="eager"
          />
        )
      }
    </div>
  </section>

  <div class="event-content-wrapper">
    {
      currentEvent.id === 'version-1-2-new-trekker-fuyuka' && (
        <div>
          <SSEventImage
            imageName="4/1"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="4/2"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="4/3"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="4/4"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
        </div>
      )
    }

    {
      currentEvent.id === 'ghost-ship-event-shop' && (
        <div>
          <SSEventImage
            imageName="1/1"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="1/2"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="1/3"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="1/4"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
        </div>
      )
    }

    <!-- Ghost Ship Event Details Images Only -->
    {
      currentEvent.id === 'ghost-ship-event-details' && (
        <div>
          <SSEventImage
            imageName="2/1"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="2/2"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="2/3"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="2/4"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
        </div>
      )
    }

    <!-- Guild Sweet Guild Images Only -->
    {
      currentEvent.id === 'guild-sweet-guild' && (
        <div>
          <SSEventImage
            imageName="5/1"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="5/2"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="5/3"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="5/4"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
        </div>
      )
    }

    <!-- Beyond the Dream Limited Event Images Only -->
    {
      currentEvent.id === 'beyond-the-dream-limited-event' && (
        <div>
          <SSEventImage
            imageName="7/1"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="7/2"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="7/3"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
          <SSEventImage
            imageName="7/4"
            alt={`${event.title}`}
            width={1200}
            height={800}
            loading="lazy"
          />
        </div>
      )
    }

    <!-- Version 1.3: A Breezy Romance Content with Images and Text -->
    {
      currentEvent.id === 'version-1-3-a-breezy-romance' && (
        <div class="paper-document">
          <header class="event-header">
            <h2 class="section-title">New Content</h2>
          </header>

          <section class="info-section">
            <h3 class="subsection-title">New Trekker and Runic Disc</h3>
            <p class="event-description">
              New ★5 Ventus Trekker: <strong>Nazuka</strong> can be recruited from the event limited
              banner: <em>A Breezy Romance</em>.
            </p>
            <SSEventImage
              imageName="6/1"
              alt="New ★5 Ventus Trekker: Nazuka - A Breezy Romance Banner"
              width={1200}
              height={800}
              loading="lazy"
            />

            <p class="event-description">
              New ★5 Ventus Disc: <strong>Deer's Song</strong> can be recruited from the event
              limited banner: <em>Afternoon Glimmer into the Green</em>.
            </p>
            <SSEventImage
              imageName="6/2"
              alt="New ★5 Ventus Disc: Deer's Song - Afternoon Glimmer into the Green Banner"
              width={1200}
              height={800}
              loading="lazy"
            />
          </section>

          <section class="info-section">
            <h3 class="subsection-title">New Story</h3>
            <h4 class="event-subtitle">Main Story Chapter Four: Beyond the Dream</h4>
            <p class="event-description">The hunt for the Big Three has reached its climax.</p>
            <p class="event-description">
              The truth behind the parting of friends, the secrets hidden within the monsters, the
              shadowy figure stirring behind the scenes... Can you wield the power as the Tyrant,
              overcome all obstacles, and reach that happy ending, filled with laughter and joy for
              all?
            </p>
            <p class="event-description">
              <strong>Period:</strong> Permanent after Dec. 08, 2025 after Maintenance
            </p>
            <SSEventImage
              imageName="6/3"
              alt="Main Story Chapter Four: Beyond the Dream"
              width={1200}
              height={800}
              loading="lazy"
            />
          </section>

          <section class="info-section">
            <h3 class="subsection-title">New Event</h3>

            <h4 class="event-subtitle">Main Story Update Event: Beyond the Dream</h4>
            <div class="info-list">
              <p>
                <strong>Period:</strong> Dec. 08, 2025 after Maintenance – Dec. 22, 2025 12:59:59
                (UTC-7)
              </p>
              <p>
                <strong>Event Shop & Reward Exchange:</strong> Dec. 08, 2025 after Maintenance – Dec
                29, 2025, 12:59:59 (UTC-7)
              </p>
              <p>
                <strong>Details:</strong> Eliminate monsters and protect the forest! Complete
                missions to get ★5 Runic Disc: One, Two, Three, Jump!, Honor Title: Beyond the
                Dream, Stellanite Dust, Sprout Ticket, Cerulean Ticket, Trekker and Disc tier-up
                materials, and more!
              </p>
            </div>
            <SSEventImage
              imageName="6/4"
              alt="Main Story Update Event: Beyond the Dream"
              width={1200}
              height={800}
              loading="lazy"
            />

            <h4 class="event-subtitle">Lucky Treasure Shovel</h4>
            <div class="info-list">
              <p>
                <strong>Period:</strong> Dec. 08, 2025 after Maintenance – Dec. 22, 2025 12:59:59
                (UTC-7)
              </p>
              <p>
                <strong>Details:</strong> Areas hiding precious treasures await exploration! During
                the event, you can use Treasure Shovels to uncover the treasures with your Trekkers,
                and accumulate points to complete quests, which will reward you with Stellanite
                Dust, Healthy Rice Ball, and more.
              </p>
              <p>
                <strong>Requirements:</strong> Authorization Level ≥ 5
              </p>
            </div>
            <SSEventImage
              imageName="6/5"
              alt="Lucky Treasure Shovel Event"
              width={1200}
              height={800}
              loading="lazy"
            />

            <h4 class="event-subtitle">Cataclysm Survivor Event Details</h4>
            <div class="info-list">
              <p>
                <strong>Period:</strong> Dec. 08, 2025 after Maintenance – Dec. 22, 2025 19:59:59
                (UTC-7)
              </p>
              <p>
                <strong>Details:</strong> Join the defense battle and complete the missions to
                obtain Stellanite Dust and Defender's Medal. Catastrophe zones will change with
                version updates. Clearing Catastrophe zones and reaching the designated score will
                grant additional Defender's Medal rewards.
              </p>
              <p>
                <strong>Catastrophe Enemy Information:</strong>
              </p>
              <ul class="enemy-zones">
                <li>Zone 1: Enemy Vulnerability: Ventus, Ignis</li>
                <li>Zone 2: Enemy Vulnerability: Ventus, Lux</li>
              </ul>
              <p>
                <strong>Requirements:</strong> Authorization Level ≥ 5
              </p>
            </div>
            <SSEventImage
              imageName="6/6"
              alt="Cataclysm Survivor Event Details"
              width={1200}
              height={800}
              loading="lazy"
            />
          </section>

          <section class="info-section">
            <h3 class="subsection-title">New Limited-time Merchandise</h3>
            <h4 class="event-subtitle">Trekker's Picks: Stellar Special</h4>
            <ul class="merchandise-list">
              <li>A Breezy Romance: Cerulean Ticket Set</li>
              <li>A Breezy Romance: Gold Disc Set</li>
              <li>A Breezy Romance: Heartfelt Bundle</li>
              <li>A Breezy Romance: Trekker Boost Bundle</li>
            </ul>
            <p>
              <strong>Period:</strong> Dec. 08, 2025 after Maintenance – Dec. 29, 2025 12:59:59
              (UTC-7)
            </p>
          </section>

          <footer class="event-footer">
            <p>Stella Sora Team</p>
            <p class="reference-link">
              Reference:{' '}
              <a
                href="https://stellasora.global/news/2114"
                target="_blank"
                rel="noopener noreferrer"
              >
                https://stellasora.global/news/2114
              </a>
            </p>
          </footer>
        </div>
      )
    }

    <!-- All other events content -->
    {
      currentEvent.id !== 'version-1-3-a-breezy-romance' &&
        currentEvent.id !== 'version-1-2-new-trekker-fuyuka' &&
        currentEvent.id !== 'ghost-ship-event-shop' &&
        currentEvent.id !== 'ghost-ship-event-details' &&
        currentEvent.id !== 'guild-sweet-guild' &&
        currentEvent.id !== 'beyond-the-dream-limited-event' && (
          <div class="paper-document">
            <header class="event-header">
              <h1 class="event-title">{currentEvent.title}</h1>
            </header>

            <section class="event-intro">
              <p class="event-description">{currentEvent.description}</p>
            </section>

            {currentEvent.enemyInfo && (
              <section class="info-section">
                <h2 class="section-title">Enemy Information</h2>
                <div class="info-grid">
                  <div class="info-item">
                    <span class="info-label">Name:</span>
                    <span class="info-value">{currentEvent.enemyInfo.name}</span>
                  </div>
                  <div class="info-item">
                    <span class="info-label">Element:</span>
                    <span class="info-value">{currentEvent.enemyInfo.element}</span>
                  </div>
                  <div class="info-item">
                    <span class="info-label">Difficulty:</span>
                    <span class="info-value">{currentEvent.enemyInfo.difficulty.join(', ')}</span>
                  </div>
                </div>
              </section>
            )}

            {currentEvent.eventPeriod && (
              <section class="info-section">
                <h2 class="section-title">Event Schedule</h2>
                <div class="info-list">
                  <div class="info-item">
                    <span class="info-label">Event Period:</span>
                    <span class="info-value">{currentEvent.eventPeriod.eventPeriod}</span>
                  </div>
                  <div class="info-item">
                    <span class="info-label">Ranking Reward Settlement:</span>
                    <span class="info-value">
                      {currentEvent.eventPeriod.rankingRewardSettlement}
                    </span>
                  </div>
                  <div class="info-item">
                    <span class="info-label">Ranking Reward Claim Period:</span>
                    <span class="info-value">
                      {currentEvent.eventPeriod.rankingRewardClaimPeriod}
                    </span>
                  </div>
                  {currentEvent.eventPeriod.challengesEndNote && (
                    <p class="note-text">*{currentEvent.eventPeriod.challengesEndNote}</p>
                  )}
                </div>
              </section>
            )}

            {currentEvent.participation && (
              <section class="info-section">
                <h2 class="section-title">Participation</h2>
                <div class="info-list">
                  <p>{currentEvent.participation.requirement}</p>
                  <p>{currentEvent.participation.quickBattle}</p>
                </div>
              </section>
            )}

            {currentEvent.awards && (
              <section class="info-section">
                <h2 class="section-title">Awards</h2>
                <div class="info-list">
                  <p>{currentEvent.awards.stageClear}</p>
                  <p>{currentEvent.awards.eventScore}</p>
                  <p>{currentEvent.awards.shopAccess}</p>
                  <p>{currentEvent.awards.rankingRewards}</p>
                </div>
              </section>
            )}

            {currentEvent.requirements && (
              <section class="info-section">
                <h2 class="section-title">Requirements</h2>
                <div class="info-list">
                  <p>{currentEvent.requirements.authorizationLevel}</p>
                  <p>{currentEvent.requirements.team}</p>
                </div>
              </section>
            )}

            {currentEvent.rewards && currentEvent.rewards.length > 0 && (
              <section class="info-section">
                <h2 class="section-title">Available Rewards</h2>
                <div class="info-list">
                  {currentEvent.rewards.map(reward => (
                    <p>{reward}</p>
                  ))}
                </div>
              </section>
            )}
          </div>
        )
    }
  </div>
</EventIndividualLayout>
