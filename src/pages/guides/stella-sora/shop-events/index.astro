---
import ShopEventIndexLayout from '../../../../layouts/stella-sora/ShopEventIndexLayout.astro';
import { getAllShopEvents } from '../../../../data/stella-sora/shop-events.js';
import SSShopEventImage from '../../../../components/stella-sora/SSShopEventImage.astro';

// SEO metadata
const metaTitle = 'Stella Sora Shop Events - Exclusive Rewards & Limited-Time Offers | GachaWiki';
const metaDescription =
  'Discover the latest Stella Sora shop events with exclusive rewards, limited-time offers, and special currency exchanges. Get detailed information about event shops, pricing, and available items.';

// Breadcrumb data
const breadcrumbs = [
  { name: 'Guides', url: '/guides' },
  { name: 'Stella Sora', url: '/guides/stella-sora' },
  { name: 'Shop Events', url: '/guides/stella-sora/shop-events/' },
];

// Get all shop events from data file
const allShopEvents = getAllShopEvents();
---

<ShopEventIndexLayout title={metaTitle} description={metaDescription} gameTitle="Shop Events">
  <!-- Structured Data for Shop Events Page -->
  <script
    type="application/ld+json"
    set:html={JSON.stringify({
      '@context': 'https://schema.org',
      '@type': 'CollectionPage',
      name: 'Stella Sora Shop Events',
      description:
        'Complete list of Stella Sora shop events with exclusive rewards and limited-time offers',
      url: 'https://gachawiki.info/guides/stella-sora/shop-events/',
      mainEntity: {
        '@type': 'ItemList',
        itemListElement: allShopEvents.map((event, index) => ({
          '@type': 'ListItem',
          position: index + 1,
          item: {
            '@type': 'Event',
            name: event.title,
            description: event.subtitle,
            startDate: event.startDate,
            endDate: event.endDate,
            url: `https://gachawiki.info${event.url}`,
            image: event.featuredImage,
          },
        })),
      },
    })}
  />

  <!-- Shop Events Introduction -->
  <section class="ss-shop-events-intro">
    <h2 class="ss-intro-title">Shop Events Strategy Guide</h2>
    <p class="ss-intro-description">
      This is an index page for the shop events. This page will help you clear all the shop items
      efficiently by showing you exactly how much stamina you need and which items you should
      prioritize first.
    </p>
  </section>

  <!-- All Shop Events -->
  <section class="ss-current-shop-events">
    <h2 class="ss-section-title">All Shop Events</h2>
    <div class="ss-shop-events-grid">
      {
        allShopEvents.map(event => (
          <a href={event.url} class="ss-shop-event-card">
            <div class="event-card-image">
              <SSShopEventImage
                imageSrc={event.featuredImage}
                alt={event.title}
                width={300}
                height={200}
              />
            </div>

            <div class="event-card-content">
              <h3 class="event-title">{event.title}</h3>

              <div class="event-dates">
                <div class="date-range">
                  {new Date(event.startDate).toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric',
                  })}{' '}
                  -{' '}
                  {new Date(event.endDate).toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric',
                  })}
                </div>
                {event.shopEndDate && (
                  <div class="shop-end-date">
                    Shop:{' '}
                    {new Date(event.shopEndDate).toLocaleDateString('en-US', {
                      month: 'short',
                      day: 'numeric',
                    })}
                  </div>
                )}
              </div>
            </div>
          </a>
        ))
      }
    </div>
  </section>
</ShopEventIndexLayout>
