---
import GuideLayout from '../../../layouts/horizon-walker/GuideLayout.astro';
import { apGuideData } from '../../../data/horizon-walker/ap-guide.js';
import APImage from '../../../components/horizon-walker/APImage.astro';

const breadcrumbs = [{ name: 'AP Guide' }];
---

<GuideLayout
  title={apGuideData.seoData.title}
  description={apGuideData.seoData.description}
  pageTitle={apGuideData.title}
  subtitle={apGuideData.subtitle}
  breadcrumbs={breadcrumbs}
>
  {
    apGuideData.sections.map(section => (
      <section class="hw-guide-section" id={section.id}>
        <h2 class="hw-section-title">{section.title}</h2>

        {/* Section Content */}
        {section.content && section.content.length > 0 && (
          <div class="hw-section-content">
            {section.content.map(paragraph => (
              <p>{paragraph}</p>
            ))}
          </div>
        )}

        {/* List */}
        {section.list && (
          <ul class="hw-guide-list">
            {section.list.map(item => (
              <li>{item}</li>
            ))}
          </ul>
        )}

        {/* Divider */}
        {section.divider && <hr class="hw-guide-divider" />}

        {/* Warning Box */}
        {section.warningBox && (
          <div class="hw-warning-box">
            <div class="hw-warning-content">{section.warningBox.content}</div>
          </div>
        )}

        {/* Image */}
        {section.image && (
          <div class="hw-guide-image-container">
            <APImage
              imageName={section.image.path}
              alt={section.image.caption}
              class="hw-guide-image"
              width={600}
              height={400}
              loading="lazy"
              format="webp"
              quality={85}
            />
            {section.image.caption && <p class="hw-guide-image-caption">{section.image.caption}</p>}
          </div>
        )}

        {/* Example Box */}
        {section.example && (
          <div class="hw-example-box">
            <div class="hw-example-title">{section.example.title}</div>
            <div class="hw-example-content">{section.example.content}</div>
          </div>
        )}

        {/* Info Box */}
        {section.infoBox && (
          <div class="hw-info-box">
            <div class="hw-info-box-title">{section.infoBox.title}</div>
            <div class="hw-info-box-content" style="white-space: pre-line;">
              {section.infoBox.content}
            </div>
          </div>
        )}

        {/* Video Link */}
        {section.videoLink && (
          <div class="hw-video-link-container">
            <a
              href={section.videoLink.url}
              target="_blank"
              rel="noopener noreferrer"
              class="hw-video-link"
            >
              {section.videoLink.text} â†’
            </a>
          </div>
        )}
      </section>
    ))
  }
</GuideLayout>

<style>
  .hw-video-link-container {
    margin: 2rem 0;
    text-align: center;
  }

  .hw-video-link {
    display: inline-block;
    padding: 1rem 2rem;
    background: linear-gradient(135deg, var(--hw-primary-warm), var(--hw-secondary-coral));
    color: var(--hw-text-white);
    text-decoration: none;
    border-radius: var(--hw-radius-md);
    font-weight: 600;
    font-size: 1.1rem;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }

  @media (max-width: 768px) {
    .hw-video-link {
      padding: 0.875rem 1.5rem;
      font-size: 1rem;
    }
  }

  @media (max-width: 480px) {
    .hw-video-link-container {
      margin: 1.5rem 0;
    }

    .hw-video-link {
      padding: 0.75rem 1.25rem;
      font-size: 0.95rem;
    }
  }
</style>
