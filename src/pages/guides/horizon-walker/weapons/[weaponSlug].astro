---
import WeaponDetailLayout from '../../../../layouts/horizon-walker/WeaponDetailLayout.astro';
import { HORIZON_WALKER_WEAPONS } from '../../../../data/horizon-walker/weapons.js';

export function getStaticPaths() {
  return HORIZON_WALKER_WEAPONS.map((weapon, index) => {
    // Pre-calculate navigation for better performance
    const prevWeapon = index > 0 ? HORIZON_WALKER_WEAPONS[index - 1] : null;
    const nextWeapon =
      index < HORIZON_WALKER_WEAPONS.length - 1 ? HORIZON_WALKER_WEAPONS[index + 1] : null;

    return {
      params: { weaponSlug: weapon.id.replace('-weapon', '') },
      props: {
        weapon,
        navigation: {
          prev: prevWeapon
            ? {
                name: prevWeapon.name,
                url: `/guides/horizon-walker/weapons/${prevWeapon.id.replace('-weapon', '')}/`,
              }
            : null,
          next: nextWeapon
            ? {
                name: nextWeapon.name,
                url: `/guides/horizon-walker/weapons/${nextWeapon.id.replace('-weapon', '')}/`,
              }
            : null,
        },
      },
    };
  });
}

const { weapon, navigation } = Astro.props;

export const prerender = true;
---

<WeaponDetailLayout weapon={weapon} navigation={navigation} />
