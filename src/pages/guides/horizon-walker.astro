---
import HorizonWalkerLayout from '../../layouts/horizon-walker/LandingLayout.astro';
import FormattedDate from '../../components/FormattedDate.astro';
import { horizonWalkerConfig } from '../../data/horizon-walker/horizon-walker.js';

// Import the landing page CSS
import '../../styles/games/horizon-walker/hw-landing-page.css';

// Extract data for easier use in template
const { meta, gameInfo, categoryGroups } = horizonWalkerConfig;

// Helper function to check if platforms exist
const hasPlatforms = gameInfo.platforms && gameInfo.platforms.length > 0;
---

<HorizonWalkerLayout
  title={meta.title}
  description={meta.description}
  gameTitle={meta.gameTitle}
  heroImage={meta.heroImage}
>
  <!-- Structured Data for Horizon Walker -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Horizon Walker Wiki & Download - Character Tier Lists, Rankings & Game Database",
      "url": "https://gachawiki.info/guides/horizon-walker/",
      "description": "Download Horizon Walker - Post-apocalyptic RPG where Chosen Humans transcend mortality to battle Forsaken Entities through dimensional rifts. Complete wiki & free download for PC, Android & iOS.",
      "publisher": {
        "@type": "Organization",
        "name": "GachaWiki",
        "url": "https://gachawiki.info"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://gachawiki.info/guides/horizon-walker/characters/?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
  </script>

  <!-- Game-specific structured data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "VideoGame",
      "name": "Horizon Walker",
      "genre": ["Fantasy RPG", "Action Adventure", "Character Collection", "Open World"],
      "description": "Post-apocalyptic RPG where humanity's golden age ended when dimensional rifts unleashed Forsaken Entities and monstrous hordes. Warriors who transcend mortality become Chosen Humans with supernatural authority to fight back. Free download for PC, Android & iOS.",
      "keywords": "Horizon Walker, Horizon Walker download, fantasy RPG, tier list, characters, equipment, dungeons, team building, meta, Horizon Walker free download, Horizon Walker apk",
      "applicationCategory": "Game",
      "operatingSystem": "Android, iOS, PC",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.6",
        "ratingCount": "2500"
      }
    }
  </script>

  <!-- Game Overview Section -->
  <section class="content-section">
    <h2 class="section-title">About</h2>
    <div class="game-description">
      {gameInfo.description}
    </div>

    <!-- Play Game Platforms -->
    {
      hasPlatforms && (
        <div class="platforms-container">
          <h3>Play on:</h3>
          <div class="platform-notes">
            <ul>
              <li>• Google Play: Censored version</li>
              <li>• One Store: Uncensored (will migrate to Steam)</li>
              <li>• Ero-Labs: Uncensored (will not migrate to Steam)</li>
              <li>• Steam: Uncensored version</li>
            </ul>
          </div>
          <div class="platforms-grid">
            {gameInfo.platforms.map(platform => (
              <a
                href={platform.url}
                target="_blank"
                rel="noopener noreferrer"
                class="platform-button"
                aria-label={`Play ${meta.gameTitle} on ${platform.name}`}
              >
                {platform.name}
              </a>
            ))}
          </div>
        </div>
      )
    }

    <!-- Social Links -->
    {
      gameInfo.socialLinks && (
        <div class="hw-social-links-container">
          <h4>Game Social:</h4>
          <div class="hw-social-links">
            {gameInfo.socialLinks.twitter && (
              <a
                href={gameInfo.socialLinks.twitter}
                target="_blank"
                rel="noopener noreferrer"
                class="hw-social-link"
                aria-label={`Follow ${meta.gameTitle} on X/Twitter`}
              >
                X/Twitter
              </a>
            )}
            {gameInfo.socialLinks.discord && (
              <a
                href={gameInfo.socialLinks.discord}
                target="_blank"
                rel="noopener noreferrer"
                class="hw-social-link"
                aria-label={`Join ${meta.gameTitle} Discord server`}
              >
                Discord
              </a>
            )}
            {gameInfo.socialLinks.youtube && (
              <a
                href={gameInfo.socialLinks.youtube}
                target="_blank"
                rel="noopener noreferrer"
                class="hw-social-link"
                aria-label={`Watch ${meta.gameTitle} on YouTube`}
              >
                YouTube
              </a>
            )}
          </div>
        </div>
      )
    }

    <p class="last-updated">
      Last Updated: <FormattedDate date={gameInfo.lastUpdated} />
    </p>
  </section>

  <!-- Resources Section -->
  <section class="content-section">
    <h2 class="hw-resources-title">Resources</h2>

    <div class="hw-resources-grid">
      {
        categoryGroups.map(category => (
          <div class={`hw-resource-category hw-category-${category.size}`}>
            <div class="hw-category-header">
              <span class="hw-category-emoji">{category.emoji}</span>
              <h3>{category.title}</h3>
              <p class="hw-category-description">{category.description}</p>
            </div>
            <div class="hw-buttons-grid">
              {category.guides.map(guide => (
                <a
                  href={guide.url}
                  class="hw-resource-button"
                  aria-label={`Navigate to ${guide.title}`}
                >
                  {guide.title}
                </a>
              ))}
            </div>
          </div>
        ))
      }
    </div>
  </section>
</HorizonWalkerLayout>
