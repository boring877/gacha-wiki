---
import GachaWikisLibraryLayout from '../layouts/GachaWikisLibraryLayout.astro';
import { Image } from 'astro:assets';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getAllGames } from '../data/games';

// Get all games from the centralized configuration
const games = getAllGames();
---

<GachaWikisLibraryLayout title={`${SITE_TITLE} - Wikis`} description={SITE_DESCRIPTION}>
  <!-- Games Section - Dynamic Layout -->
  <div class="games-section">
    {
      games.map(game => (
        <a href={game.url} class="game-link">
          <article
            class={`game-card game-${game.slug} ${game.status === 'coming-soon' ? 'coming-soon' : ''}`}
          >
            <div class="game-header">
              <div class="game-icon">
                <Image
                  src={game.image}
                  alt={game.name}
                  width={75}
                  height={75}
                  format="webp"
                  quality={85}
                  loading="lazy"
                />
              </div>
              <div class="game-info">
                <h3 class="game-title">{game.name}</h3>
                <p class="game-description">{game.description}</p>
                {game.sections && (
                  <div class="game-sections">
                    {game.sections.slice(0, 3).join(' • ')}
                    {game.sections.length > 3 && ` • +${game.sections.length - 3} more`}
                  </div>
                )}
              </div>
              <div class="game-arrow">→</div>
            </div>
          </article>
        </a>
      ))
    }
  </div>
</GachaWikisLibraryLayout>
