// Zone Nova Character Data & Utilities
import { getFactionByCharacter } from './factions.js';
import { CHARACTER_CLASSES } from './classes.js';

// Character array - sorted alphabetically by name
export const ZONE_NOVA_CHARACTERS = [
  {
    id: 1,
    name: 'Afrodite',
    rarity: 'SSR',
    element: 'Holy',
    role: 'DPS',
    class: 'Warrior',
    faction: getFactionByCharacter('Afrodite'),
    tags: ['Crit Rate', 'Attack Speed', 'Normal Attack', 'Melee'],
    stats: { hp: 8033, attack: 1305, defense: 530, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Afrodite.jpg',
    slug: 'afrodite',
    detailUrl: '/guides/zone-nova/characters/afrodite',
  },
  {
    id: 28,
    name: 'Anubis',
    rarity: 'SSR',
    element: 'Chaos',
    role: 'Healer',
    class: 'Healer',
    faction: getFactionByCharacter('Anubis'),
    tags: ['Healing', 'Ranged', 'Damage Reduction', 'DOT'],
    stats: { hp: 9180, attack: 1004, defense: 729, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Anubis.jpg',
    slug: 'anubis',
    detailUrl: '/guides/zone-nova/characters/anubis',
  },
  {
    id: 2,
    name: 'Apollo',
    rarity: 'SSR',
    element: 'Fire',
    role: 'Buffer',
    class: 'Buffer',
    faction: getFactionByCharacter('Apollo'),
    tags: ['Ranged', 'Extra Attack', 'Buff', 'Energy'],
    stats: { hp: 9564, attack: 1004, defense: 672, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Apollo.jpg',
    slug: 'apollo',
    detailUrl: '/guides/zone-nova/characters/apollo',
  },
  {
    id: 3,
    name: 'Artemis',
    rarity: 'SSR',
    element: 'Wind',
    role: 'DPS',
    class: 'Warrior',
    faction: getFactionByCharacter('Artemis'),
    tags: ['Melee', 'Healing', 'HP Consume'],
    stats: { hp: 8033, attack: 1461, defense: 530, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Artemis.jpg',
    slug: 'artemis',
    detailUrl: '/guides/zone-nova/characters/artemis',
  },
  {
    id: 32,
    name: 'Athena',
    rarity: 'SSR',
    element: 'Wind',
    role: 'Buffer',
    class: 'Buffer',
    faction: getFactionByCharacter('Athena'),
    tags: [
      'Ranged',
      'Cooldown Reduction',
      'Normal Attack',
      'Crit Rate',
      'Energy',
      'Damage Reduction',
    ],
    stats: { hp: 9564, attack: 1004, defense: 672, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Athena.jpg',
    slug: 'athena',
    detailUrl: '/guides/zone-nova/characters/athena',
  },
  {
    id: 4,
    name: 'Arthur',
    rarity: 'SSR',
    element: 'Holy',
    role: 'DPS',
    class: 'Mage',
    faction: getFactionByCharacter('Arthur'),
    tags: ['Melee', 'Crit Rate', 'Crit Damage', 'Buff'],
    stats: {
      hp: 8033,
      attack: 1305,
      defense: 530,
      energyRecovery: 0.25,
      critRate: 15,
      critDmg: 50,
    },
    image: '/images/games/zone-nova/characters/Arthur.jpg',
    slug: 'arthur',
    detailUrl: '/guides/zone-nova/characters/arthur',
  },
  {
    id: 5,
    name: 'Bastet',
    rarity: 'SR',
    element: 'Wind',
    role: 'DPS',
    class: 'Mage',
    faction: getFactionByCharacter('Bastet'),
    tags: ['Ranged', 'Normal Attack', 'AOE'],
    stats: { hp: 6694, attack: 1088, defense: 442, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Bastet.jpg',
    slug: 'bastet',
    detailUrl: '/guides/zone-nova/characters/bastet',
  },
  {
    id: 6,
    name: 'Belphegar',
    rarity: 'SR',
    element: 'Chaos',
    role: 'Debuffer',
    class: 'Debuffer',
    faction: getFactionByCharacter('Belphegar'),
    tags: ['Ranged', 'Debuff', 'Cooldown Increase', 'Debuff', 'Ultimate Block', 'Debuff', 'AOE'],
    stats: { hp: 7970, attack: 837, defense: 560, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/belphegar.jpg',
    slug: 'belphegar',
    detailUrl: '/guides/zone-nova/characters/belphegar',
  },
  {
    id: 7,
    name: 'Chiya',
    rarity: 'SSR',
    element: 'Ice',
    role: 'DPS',
    class: 'Rogue',
    faction: getFactionByCharacter('Chiya'),
    tags: ['Melee', 'Crit Rate', 'Crit Damage', 'Enhanced Ultimate', 'Attack Speed'],
    stats: { hp: 8033, attack: 1305, defense: 530, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Chiya.jpg',
    slug: 'chiya',
    detailUrl: '/guides/zone-nova/characters/chiya',
  },
  {
    id: 8,
    name: 'Cleopatra',
    rarity: 'SSR',
    element: 'Chaos',
    role: 'DPS',
    class: 'Mage',
    faction: getFactionByCharacter('Cleopatra'),
    tags: ['Ranged', 'DOT', 'AOE', 'Penetration', 'Energy'],
    stats: { hp: 8033, attack: 1461, defense: 530, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Cleopatra.jpg',
    slug: 'cleopatra',
    detailUrl: '/guides/zone-nova/characters/cleopatra',
  },
  {
    id: 36,
    name: 'Freye',
    rarity: 'SSR',
    element: 'Chaos',
    role: 'Debuffer',
    class: 'Debuffer',
    faction: getFactionByCharacter('Freye'),
    tags: [
      'DOT',
      'Enhanced Ultimate',
      'Damage Taken Increase',
      'element weaknesses',
      'energy gain reduced',
      'debuff',
      'range',
    ],
    stats: { hp: 9180, attack: 1184, defense: 729, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Freye.jpg',
    slug: 'freye',
    detailUrl: '/guides/zone-nova/characters/freye',
  },
  {
    id: 33,
    name: 'Gaia',
    rarity: 'SSR',
    element: 'Holy',
    role: 'Healer',
    class: 'Healer',
    faction: getFactionByCharacter('Gaia'),
    tags: ['HP Scaling', 'Healing', 'Ranged', 'Revive', 'Max HP Boost', 'AOE Healing'],
    stats: { hp: 10548, attack: 580, defense: 918, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Gaia.jpg',
    slug: 'gaia',
    detailUrl: '/guides/zone-nova/characters/gaia',
  },
  {
    id: 9,
    name: 'Greed Mammon',
    rarity: 'SR',
    element: 'Chaos',
    role: 'DPS',
    class: 'Mage',
    faction: getFactionByCharacter('Greed Mammon'),
    tags: ['Melee', 'AOE', 'Enhanced Ultimate', 'Crit Damage', 'Energy', 'Damage Reduction'],
    stats: { hp: 6694, attack: 1088, defense: 442, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/GreedMammon.jpg',
    slug: 'greed-mammon',
    detailUrl: '/guides/zone-nova/characters/greed-mammon',
  },
  {
    id: 10,
    name: 'Guinevere',
    rarity: 'SSR',
    element: 'Fire',
    role: 'Tank',
    class: 'Guardian',
    faction: getFactionByCharacter('Guinevere'),
    tags: [
      'Melee',
      'Extra Attack',
      'Block',
      'Damage Reduction',
      'Healing',
      'Enhanced Ultimate',
      'Shield',
      'Defense Scaling',
    ],
    stats: {
      hp: 10520,
      attack: 734,
      defense: 1232,
      energyRecovery: 0.25,
      critRate: 0,
      critDmg: 50,
    },
    image: '/images/games/zone-nova/characters/Guinevere.jpg',
    slug: 'guinevere',
    detailUrl: '/guides/zone-nova/characters/guinevere',
  },
  {
    id: 31,
    name: 'Hera',
    rarity: 'SSR',
    element: 'Chaos',
    role: 'DPS',
    class: 'Rogue',
    faction: getFactionByCharacter('Hera'),
    tags: ['Ranged', 'DOT', 'Enhanced Ultimate'],
    stats: { hp: 8033, attack: 1461, defense: 530, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Hera.jpg',
    slug: 'hera',
    detailUrl: '/guides/zone-nova/characters/hera',
  },
  {
    id: 11,
    name: 'Horus',
    rarity: 'SSR',
    element: 'Holy',
    role: 'Debuffer',
    class: 'Debuffer',
    faction: getFactionByCharacter('Horus'),
    tags: [
      'Ranged',
      'DOT',
      'AOE',
      'Interrupt',
      'Debuff',
      'DOT Damage Boost',
      'Penetration',
      'Damage Boost',
    ],
    stats: { hp: 8033, attack: 1461, defense: 530, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Horus.jpg',
    slug: 'horus',
    detailUrl: '/guides/zone-nova/characters/horus',
  },
  {
    id: 29,
    name: "Jeanne d'Arc",
    rarity: 'SSR',
    element: 'Wind',
    role: 'Healer',
    class: 'Healer',
    faction: getFactionByCharacter("Jeanne d'Arc"),
    tags: ['Ranged', 'Healing', 'Revive', 'Damage Reduction', 'Continuous Healing'],
    stats: { hp: 9180, attack: 1004, defense: 729, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/JoanofArc.jpg',
    slug: 'jeanne-darc',
    detailUrl: '/guides/zone-nova/characters/jeanne-darc',
  },
  {
    id: 12,
    name: 'Kela',
    rarity: 'SR',
    element: 'Holy',
    role: 'Healer',
    class: 'Healer',
    faction: getFactionByCharacter('Kela'),
    tags: ['Ranged', 'Healing', 'Damage Reduction'],
    stats: { hp: 7650, attack: 837, defense: 608, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/kela.jpg',
    slug: 'kela',
    detailUrl: '/guides/zone-nova/characters/kela',
  },
  {
    id: 13,
    name: 'Lancelot',
    rarity: 'SR',
    element: 'Holy',
    role: 'Tank',
    class: 'Guardian',
    faction: getFactionByCharacter('Lancelot'),
    tags: ['Melee', 'HP Scaling', 'Shield', 'Damage Reduction', 'Healing'],
    stats: { hp: 10857, attack: 612, defense: 957, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Lancelot.jpg',
    slug: 'lancelot',
    detailUrl: '/guides/zone-nova/characters/lancelot',
  },
  {
    id: 14,
    name: 'Leviathan',
    rarity: 'SR',
    element: 'Wind',
    role: 'DPS',
    class: 'Rogue',
    faction: getFactionByCharacter('Leviathan'),
    tags: ['Melee', 'Crit Rate', 'Extra Attack'],
    stats: { hp: 6694, attack: 1088, defense: 442, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Leviathan.jpg',
    slug: 'leviathan',
    detailUrl: '/guides/zone-nova/characters/leviathan',
  },
  {
    id: 15,
    name: 'Loki',
    rarity: 'SSR',
    element: 'Chaos',
    role: 'Debuffer',
    class: 'Debuffer',
    faction: getFactionByCharacter('Loki'),
    tags: ['Ranged', 'Debuff', 'Ultimate Block', 'Damage Reduction', 'Damage Boost'],
    stats: { hp: 9564, attack: 1004, defense: 672, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Loki.jpg',
    slug: 'loki',
    detailUrl: '/guides/zone-nova/characters/loki',
  },
  {
    id: 16,
    name: 'Lyra',
    rarity: 'SSR',
    element: 'Fire',
    role: 'DPS',
    class: 'Mage',
    faction: getFactionByCharacter('Lyra'),
    tags: [
      'Melee',
      'Crit Rate',
      'Crit Damage',
      'Enhanced Ultimate',
      'Cooldown Reduction',
      'Attack Boost',
    ],
    stats: {
      hp: 8033,
      attack: 1305,
      defense: 530,
      energyRecovery: 0.25,
      critRate: 15,
      critDmg: 50,
    },
    image: '/images/games/zone-nova/characters/Lyra.jpg',
    slug: 'lyra',
    detailUrl: '/guides/zone-nova/characters/lyra',
  },
  {
    id: 17,
    name: 'Merlin',
    rarity: 'SSR',
    element: 'Fire',
    role: 'DPS',
    class: 'Rogue',
    faction: getFactionByCharacter('Merlin'),
    tags: ['Melee', 'Crit Damage', 'Enhanced Ultimate', 'Crit Rate', 'Damage Boost'],
    stats: {
      hp: 8033,
      attack: 1305,
      defense: 530,
      energyRecovery: 0.25,
      critRate: 15,
      critDmg: 50,
    },
    image: '/images/games/zone-nova/characters/Merlin.jpg',
    slug: 'merlin',
    detailUrl: '/guides/zone-nova/characters/merlin',
  },
  {
    id: 18,
    name: 'Mordred',
    rarity: 'SR',
    element: 'Fire',
    role: 'DPS',
    class: 'Warrior',
    faction: getFactionByCharacter('Mordred'),
    tags: ['Melee', 'Healing', 'HP Scaling', 'Damage Reduction'],
    stats: { hp: 8470, attack: 837, defense: 560, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Mordred.jpg',
    slug: 'mordred',
    detailUrl: '/guides/zone-nova/characters/mordred',
  },
  {
    id: 19,
    name: 'Naiya',
    rarity: 'SSR',
    element: 'Ice',
    role: 'Buffer',
    class: 'Buffer',
    faction: getFactionByCharacter('Naiya'),
    tags: ['Ranged', 'Buff', 'Crit Damage', 'Energy', 'Attack Boost', 'Damage Boost', 'Interrupt'],
    stats: { hp: 9564, attack: 1004, defense: 672, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Naiya.jpg',
    slug: 'naiya',
    detailUrl: '/guides/zone-nova/characters/naiya',
  },
  {
    id: 20,
    name: 'Nini',
    rarity: 'SR',
    element: 'Ice',
    role: 'Debuffer',
    class: 'Debuffer',
    faction: getFactionByCharacter('Nini'),
    tags: ['Ranged', 'Debuff', 'Damage Taken Increase'],
    stats: { hp: 7970, attack: 837, defense: 560, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Nini.jpg',
    slug: 'nini',
    detailUrl: '/guides/zone-nova/characters/nini',
  },
  {
    id: 34,
    name: 'Odin',
    rarity: 'SSR',
    element: 'Fire',
    role: 'DPS',
    class: 'Rogue',
    faction: getFactionByCharacter('Odin'),
    tags: ['Ranged', 'DOT', 'Damage Reduction', 'Penetration'],
    stats: { hp: 7308, attack: 1305, defense: 530, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Odin.jpg',
    slug: 'odin',
    detailUrl: '/guides/zone-nova/characters/odin',
  },
  {
    id: 27,
    name: 'Penny',
    rarity: 'SSR',
    element: 'Wind',
    role: 'Tank',
    class: 'Guardian',
    faction: getFactionByCharacter('Penny'),
    tags: ['Defense Scaling', 'Shield', 'Damage Reduction', 'Buff', 'Melee'],
    stats: {
      hp: 10520,
      attack: 794,
      defense: 1232,
      energyRecovery: 0.25,
      critRate: 0,
      critDmg: 50,
    },
    image: '/images/games/zone-nova/characters/penny.jpg',
    slug: 'penny',
    detailUrl: '/guides/zone-nova/characters/penny',
  },
  {
    id: 21,
    name: 'Rose',
    rarity: 'SR',
    element: 'Ice',
    role: 'DPS',
    class: 'Mage',
    faction: getFactionByCharacter('Rose'),
    tags: ['Ranged', 'AOE', 'Crit Rate', 'Normal Attack', 'Attack Speed'],
    stats: { hp: 6694, attack: 1088, defense: 442, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Rose.jpg',
    slug: 'rose',
    detailUrl: '/guides/zone-nova/characters/rose',
  },
  {
    id: 22,
    name: 'Shanna',
    rarity: 'SR',
    element: 'Fire',
    role: 'DPS',
    class: 'Rogue',
    faction: getFactionByCharacter('Shanna'),
    tags: ['Melee', 'Normal Attack', 'Crit Rate', 'Crit Damage', 'Buff'],
    stats: { hp: 6694, attack: 1088, defense: 442, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Shanna.jpg',
    slug: 'shanna',
    detailUrl: '/guides/zone-nova/characters/shanna',
  },
  {
    id: 23,
    name: 'Shu',
    rarity: 'SR',
    element: 'Wind',
    role: 'Debuffer',
    class: 'Debuffer',
    faction: getFactionByCharacter('Shu'),
    tags: ['Ranged', 'DOT', 'Damage Taken Increase', 'Debuff', 'AOE'],
    stats: { hp: 7970, attack: 837, defense: 560, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Shu.jpg',
    slug: 'shu',
    detailUrl: '/guides/zone-nova/characters/shu',
  },
  {
    id: 30,
    name: 'Snow Girl',
    rarity: 'SR',
    element: 'Ice',
    role: 'Healer',
    class: 'Healer',
    faction: getFactionByCharacter('Snow Girl'),
    tags: ['Ranged', 'Damage Boost', 'Continuous Healing', 'AOE Healing'],
    stats: { hp: 7850, attack: 837, defense: 608, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Snow.jpg',
    slug: 'snow-girl',
    detailUrl: '/guides/zone-nova/characters/snow-girl',
  },
  {
    id: 24,
    name: 'Tefnut',
    rarity: 'SR',
    element: 'Holy',
    role: 'DPS',
    class: 'Rogue',
    faction: getFactionByCharacter('Tefnut'),
    tags: ['Melee', 'DOT', 'Penetration', 'DOT Damage Boost'],
    stats: { hp: 6694, attack: 1088, defense: 442, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Tefnut.jpg',
    slug: 'tefnut',
    detailUrl: '/guides/zone-nova/characters/tefnut',
  },
  {
    id: 35,
    name: 'Thor',
    rarity: 'SSR',
    element: 'Holy',
    role: 'Tank',
    class: 'Guardian',
    faction: getFactionByCharacter('Thor'),
    tags: [
      'Enhanced Ultimate',
      'Defense Scaling',
      'DOT',
      'Melee',
      'Interrupt',
      'Shield',
      'Continuous Shielding',
      'Damage Reduction',
      'Damage Taken Increase',
      'AOE Shielding',
    ],
    stats: {
      hp: 10520,
      attack: 698,
      defense: 1315,
      energyRecovery: 0.25,
      critRate: 0,
      critDmg: 50,
    },
    image: '/images/games/zone-nova/characters/Thor.jpg',
    slug: 'thor',
    detailUrl: '/guides/zone-nova/characters/thor',
  },
  {
    id: 25,
    name: 'Yuis',
    rarity: 'SSR',
    element: 'Holy',
    role: 'DPS',
    class: 'Rogue',
    faction: getFactionByCharacter('Yuis'),
    tags: ['Ranged', 'Crit Rate', 'Crit Damage', 'Enhanced Ultimate', 'Extra Attack'],
    stats: { hp: 8033, attack: 1305, defense: 530, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Yuis.jpg',
    slug: 'yuis',
    detailUrl: '/guides/zone-nova/characters/yuis',
  },
  {
    id: 26,
    name: 'Zashiki-warashi',
    rarity: 'SR',
    element: 'Fire',
    role: 'Buffer',
    class: 'Buffer',
    faction: getFactionByCharacter('Zashiki-warashi'),
    tags: ['Ranged', 'Buff', 'Attack Boost', 'Damage Boost', 'Crit Rate'],
    stats: { hp: 7970, attack: 837, defense: 560, energyRecovery: 0.25, critRate: 0, critDmg: 50 },
    image: '/images/games/zone-nova/characters/Zashiki-warashi.jpg',
    slug: 'zashiki-warashi',
    detailUrl: '/guides/zone-nova/characters/zashiki-warashi',
  },
  {
    id: 37,
    name: 'Freya',
    rarity: 'SSR',
    element: 'Ice',
    role: 'DPS',
    class: 'Mage',
    faction: getFactionByCharacter('Freya'),
    tags: ['Ranged', 'Crit Damage', 'Crit Rate', 'Normal Attack', 'Attack Speed', 'AOE'],
    stats: {
      hp: 7308,
      attack: 1193,
      defense: 474,
      energyRecovery: 0.25,
      critRate: 16.8,
      critDmg: 50,
    },
    image: '/images/games/zone-nova/characters/Freya.jpg',
    slug: 'freya',
    detailUrl: '/guides/zone-nova/characters/freya',
  },
];

// Metadata (unique, sorted)
export const CHARACTER_METADATA = {
  elements: Array.from(new Set(ZONE_NOVA_CHARACTERS.map(c => c.element))).sort(),
  rarities: Array.from(new Set(ZONE_NOVA_CHARACTERS.map(c => c.rarity))).sort((a, b) =>
    a === 'SSR' ? -1 : b === 'SSR' ? 1 : a.localeCompare(b)
  ),
  roles: Array.from(new Set(ZONE_NOVA_CHARACTERS.map(c => c.role))).sort(),
  classes: Array.from(new Set(ZONE_NOVA_CHARACTERS.map(c => c.class))).sort(),
  factions: Array.from(new Set(ZONE_NOVA_CHARACTERS.map(c => c.faction))).sort(),
};

// Utility functions (pure, safe for client)
export function filterCharacters(characters, { element, rarity, role, class: charClass, faction }) {
  return characters.filter(
    c =>
      (!element || c.element === element) &&
      (!rarity || c.rarity === rarity) &&
      (!role || c.role === role) &&
      (!charClass || c.class === charClass) &&
      (!faction || c.faction === faction)
  );
}

export function sortCharacters(characters, sortKey, direction = 'asc') {
  return [...characters].sort((a, b) => {
    let valA = a.stats[sortKey] !== undefined ? a.stats[sortKey] : a[sortKey];
    let valB = b.stats[sortKey] !== undefined ? b.stats[sortKey] : b[sortKey];
    if (typeof valA === 'string') valA = valA.toLowerCase();
    if (typeof valB === 'string') valB = valB.toLowerCase();
    if (valA < valB) return direction === 'asc' ? -1 : 1;
    if (valA > valB) return direction === 'asc' ? 1 : -1;
    return 0;
  });
}

export function getCharacterBySlug(slug) {
  return ZONE_NOVA_CHARACTERS.find(c => c.slug === slug);
}

export function getCharacterClass(characterName) {
  const character = ZONE_NOVA_CHARACTERS.find(c => c.name === characterName);
  return character ? character.class : null;
}

export function getCharactersByClass(className) {
  return ZONE_NOVA_CHARACTERS.filter(c => c.class === className);
}

export function getClassInfo(characterName) {
  const character = ZONE_NOVA_CHARACTERS.find(c => c.name === characterName);
  if (!character) return null;

  return CHARACTER_CLASSES[character.class] || null;
}
